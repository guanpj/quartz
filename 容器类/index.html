<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="å…¨å®¶ç¦ï¼š Iterable æ¥å£ å¯è¿­ä»£çš„æ„æ€ï¼Œå®ç°æ­¤æ¥å£å…è®¸å¯¹è±¡æˆä¸ºâ€œfor-eachâ€å¾ªç¯è¯­å¥çš„ç›®æ ‡ï¼Œæä¾› iterator æ–¹æ³•ç”¨äºéå†å…ƒç´ ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14  public interface Iterable<T> { Iterator<T> iterator(); default void forEach(Consumer<?"><meta property="og:title" content="å®¹å™¨ç±»"><meta property="og:description" content="å…¨å®¶ç¦ï¼š Iterable æ¥å£ å¯è¿­ä»£çš„æ„æ€ï¼Œå®ç°æ­¤æ¥å£å…è®¸å¯¹è±¡æˆä¸ºâ€œfor-eachâ€å¾ªç¯è¯­å¥çš„ç›®æ ‡ï¼Œæä¾› iterator æ–¹æ³•ç”¨äºéå†å…ƒç´ ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14  public interface Iterable<T> { Iterator<T> iterator(); default void forEach(Consumer<?"><meta property="og:type" content="website"><meta property="og:image" content="https://www.guanpj.top/icon.png"><meta property="og:url" content="https://www.guanpj.top/%E5%AE%B9%E5%99%A8%E7%B1%BB/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="å®¹å™¨ç±»"><meta name=twitter:description content="å…¨å®¶ç¦ï¼š Iterable æ¥å£ å¯è¿­ä»£çš„æ„æ€ï¼Œå®ç°æ­¤æ¥å£å…è®¸å¯¹è±¡æˆä¸ºâ€œfor-eachâ€å¾ªç¯è¯­å¥çš„ç›®æ ‡ï¼Œæä¾› iterator æ–¹æ³•ç”¨äºéå†å…ƒç´ ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14  public interface Iterable<T> { Iterator<T> iterator(); default void forEach(Consumer<?"><meta name=twitter:image content="https://www.guanpj.top/icon.png"><meta name=twitter:site content="guanpj"><title>å®¹å™¨ç±»</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://www.guanpj.top//icon.png><link href=https://www.guanpj.top/styles.0452046239b15cdfa822e3a8fa41b16d.min.css rel=stylesheet><link href=https://www.guanpj.top/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://www.guanpj.top/js/darkmode.b65338f159f3469fa8b9dc7675293fba.min.js></script>
<script src=https://www.guanpj.top/js/util.a0ccf91e1937fe761a74da4946452710.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script async src=https://www.guanpj.top/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://www.guanpj.top/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://www.guanpj.top/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://www.guanpj.top/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://www.guanpj.top/",fetchData=Promise.all([fetch("https://www.guanpj.top/indices/linkIndex.a0cf85a144674d956ca9db3dfb7745ab.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://www.guanpj.top/indices/contentIndex.838b718684373c48b1094185cb7853ff.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://www.guanpj.top",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://www.guanpj.top",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/www.guanpj.top\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=www.guanpj.top src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://www.guanpj.top/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://www.guanpj.top/>ğŸŒ» guanpjã®èŠ±å›­ ğŸŒµ</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>å®¹å™¨ç±»</h1><p class=meta>Last updated
Mar 22, 2023</p><ul class=tags><li><a href=https://www.guanpj.top/tags/Collection/>Collection</a></li><li><a href=https://www.guanpj.top/tags/Iterable/>Iterable</a></li><li><a href=https://www.guanpj.top/tags/Java-%E5%AE%B9%E5%99%A8%E7%B1%BB/>Java å®¹å™¨ç±»</a></li><li><a href=https://www.guanpj.top/tags/Java/>Java</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#iterable-æ¥å£>Iterable æ¥å£</a></li><li><a href=#collection-æ¥å£>Collection æ¥å£</a><ol><li><a href=#set-æ¥å£>Set æ¥å£</a><ol><li><a href=#hashset-ç±»>HashSet ç±»</a><ol><li><a href=#ç‰¹ç‚¹>ç‰¹ç‚¹</a></li><li><a href=#æ·»åŠ å…ƒç´ è§„åˆ™>æ·»åŠ å…ƒç´ è§„åˆ™</a></li></ol></li><li><a href=#linkedhashset-ç±»>LinkedHashSet ç±»</a></li><li><a href=#treeset-ç±»>TreeSet ç±»</a><ol><li><a href=#ä¸»è¦æ–¹æ³•>ä¸»è¦æ–¹æ³•</a></li><li><a href=#æ’åºæ–¹å¼>æ’åºæ–¹å¼</a><ol><li><a href=#strongè‡ªç„¶æ’åºstrong><strong>è‡ªç„¶æ’åº</strong></a></li><li><a href=#strongå®šåˆ¶æ’åºstrong><strong>å®šåˆ¶æ’åº</strong></a></li></ol></li><li><a href=#åˆ¤æ–­å…ƒç´ ç›¸ç­‰>åˆ¤æ–­å…ƒç´ ç›¸ç­‰</a></li></ol></li><li><a href=#hashset-å’Œ-treeset-å¯¹æ¯”>HashSet å’Œ TreeSet å¯¹æ¯”</a></li></ol></li><li><a href=#queue-æ¥å£>Queue æ¥å£</a><ol><li><a href=#deque-æ¥å£>Deque æ¥å£</a><ol><li><a href=#ä¸»è¦æ–¹æ³•-1>ä¸»è¦æ–¹æ³•</a></li><li><a href=#ä¸-queuestack-çš„å…³ç³»>ä¸ Queueã€Stack çš„å…³ç³»</a></li><li><a href=#arraydeque-ç±»>ArrayDeque ç±»</a><ol><li><a href=#strongå®ç°åŸç†strong><strong>å®ç°åŸç†</strong></a></li></ol></li></ol></li><li><a href=#priorityqueue-ç±»>PriorityQueue ç±»</a><ol><li><a href=#æ–¹æ³•æ¦‚è§ˆ>æ–¹æ³•æ¦‚è§ˆ</a></li><li><a href=#æ’åºæ–¹å¼-1>æ’åºæ–¹å¼</a></li><li><a href=#å®ç°åŸç†>å®ç°åŸç†</a></li></ol></li></ol></li><li><a href=#list-æ¥å£>List æ¥å£</a><ol><li><a href=#arraylist-ç±»>ArrayList ç±»</a><ol><li><a href=#æ‰©å®¹æœºåˆ¶>æ‰©å®¹æœºåˆ¶</a></li><li><a href=#systemarraycopyå’Œarrayscopyof-æ–¹æ³•>System.arraycopy()Â å’ŒÂ Arrays.copyOf() æ–¹æ³•</a></li><li><a href=#transient-çš„ä½œç”¨>transient çš„ä½œç”¨</a></li><li><a href=#éå†æ–¹å¼>éå†æ–¹å¼</a></li></ol></li><li><a href=#vector-ç±»>Vector ç±»</a><ol><li><a href=#stack-ç±»>Stack ç±»</a></li></ol></li><li><a href=#linkedlist-ç±»>LinkedList ç±»</a><ol><li><a href=#æ–¹æ³•æ¦‚è§ˆ-1>æ–¹æ³•æ¦‚è§ˆ</a></li><li><a href=#å®ç°åŸç†-1>å®ç°åŸç†</a></li><li><a href=#éå†æ–¹å¼-1>éå†æ–¹å¼</a></li></ol></li></ol></li></ol></li><li><a href=#map-æ¥å£>Map æ¥å£</a><ol><li><a href=#hashmap>HashMap</a><ol><li><a href=#linkedhashmap>LinkedHashMap</a><ol><li><a href=#strongå®ç°åŸç†strong-1><strong>å®ç°åŸç†</strong></a></li><li><a href=#afternodeaccess>afterNodeAccess()</a></li><li><a href=#afternodeinsertion>afterNodeInsertion()</a></li><li><a href=#afternoderemoval>afterNodeRemoval()</a></li><li><a href=#lru-ç¼“å­˜>LRU ç¼“å­˜</a></li></ol></li></ol></li><li><a href=#treemap>TreeMap</a><ol><li><a href=#æ’åºæ–¹å¼-2>æ’åºæ–¹å¼</a></li><li><a href=#åˆ¤æ–­å…ƒç´ ç›¸ç­‰-1>åˆ¤æ–­å…ƒç´ ç›¸ç­‰</a></li><li><a href=#å®ç°åŸç†-2>å®ç°åŸç†</a></li></ol></li></ol></li><li><a href=#fast-fail-æœºåˆ¶>fast-fail æœºåˆ¶</a></li><li><a href=#heading></a></li></ol></nav></details></aside><p>å…¨å®¶ç¦ï¼š
<img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_095328.png width=auto alt></p><a href=#iterable-æ¥å£><h1 id=iterable-æ¥å£><span class=hanchor arialabel=Anchor># </span>Iterable æ¥å£</h1></a><p>å¯è¿­ä»£çš„æ„æ€ï¼Œå®ç°æ­¤æ¥å£å…è®¸å¯¹è±¡æˆä¸ºâ€œfor-eachâ€å¾ªç¯è¯­å¥çš„ç›®æ ‡ï¼Œæä¾› iterator æ–¹æ³•ç”¨äºéå†å…ƒç´ ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Iterable</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Iterator</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>void</span> <span class=nf>forEach</span><span class=o>(</span><span class=n>Consumer</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>T</span><span class=o>&gt;</span> <span class=n>action</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>action</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>T</span> <span class=n>t</span> <span class=o>:</span> <span class=k>this</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>t</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>Spliterator</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=nf>spliterator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Spliterators</span><span class=o>.</span><span class=na>spliteratorUnknownSize</span><span class=o>(</span><span class=n>iterator</span><span class=o>(),</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Iterator æ„æ€ä¸ºè¿­ä»£å™¨ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>hasNext</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>E</span> <span class=nf>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>void</span> <span class=nf>remove</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=n>UnsupportedOperationException</span><span class=o>(</span><span class=s>&#34;remove&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>void</span> <span class=nf>forEachRemaining</span><span class=o>(</span><span class=n>Consumer</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>action</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>action</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>hasNext</span><span class=o>())</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>next</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿­ä»£å…¶å®æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºéå†ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–éå†å„ç±»å®¹å™¨é‡Œé¢çš„æ‰€æœ‰å¯¹è±¡çš„æ¥å£ã€‚å®ƒæ˜¯ä¸€ä¸ªç»å…¸çš„è®¾è®¡æ¨¡å¼â€”â€”è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰ã€‚ è¿­ä»£å™¨æ¨¡å¼æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆæ— é¡»æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</p><p><strong>æ³¨æ„ï¼š</strong>å½“ä½¿ç”¨ Iterator å¯¹é›†åˆå…ƒç´ è¿›è¡Œè¿­ä»£æ—¶ï¼ŒIterator å¹¶ä¸æ˜¯æŠŠé›†åˆå…ƒç´ æœ¬èº«ä¼ ç»™äº†è¿­ä»£å˜é‡ï¼Œè€Œæ˜¯æŠŠé›†åˆå…ƒç´ çš„å€¼ä¼ ç»™äº†è¿­ä»£å˜é‡ï¼ˆå°±å¦‚åŒå‚æ•°ä¼ é€’æ˜¯å€¼ä¼ é€’ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹ä¼ é€’çš„æ˜¯å€¼ï¼Œå¼•ç”¨ç±»å‹ä¼ é€’çš„ä»…ä»…æ˜¯å¯¹è±¡çš„å¼•ç”¨å˜é‡ï¼‰ï¼Œæ‰€ä»¥ä¿®æ”¹è¿­ä»£å˜é‡çš„å€¼å¯¹é›†åˆå…ƒç´ æœ¬èº«æ²¡æœ‰ä»»ä½•å½±å“ã€‚</p><a href=#collection-æ¥å£><h1 id=collection-æ¥å£><span class=hanchor arialabel=Anchor># </span>Collection æ¥å£</h1></a><p>Collection æ¥å£ä¸ºé›†åˆå±‚æ¬¡çš„æ ¹æ¥å£ï¼ŒCollection æ¡†æ¶æ¦‚è§ˆå¦‚å›¾ï¼š
<img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_095429.png width=auto alt>
Collection æ¥å£ä¸­çš„å…³é”®æ–¹æ³•å®šä¹‰å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Collection</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>Iterable</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// é›†åˆå¤§å°
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=nf>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ˜¯å¦ä¸ºç©º
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>isEmpty</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ˜¯å¦åŒ…å«æ­¤å…ƒç´  o
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è¿­ä»£å™¨
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è½¬æ¢æˆæ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Object</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è½¬æ¢æˆæŒ‡å®šç±»å‹æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>(</span><span class=n>T</span><span class=o>[]</span> <span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ·»åŠ å…ƒç´  e
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Â ç§»é™¤å…ƒç´  o
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Â æ˜¯å¦åŒ…å«å¦ä¸€é›†åˆ c
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>containsAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Â ç§»é™¤æ‰€æœ‰é›†åˆ c ä¸­çš„å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>removeAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * ç§»é™¤ç¬¦åˆæ¡ä»¶çš„å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>boolean</span> <span class=nf>removeIf</span><span class=o>(</span><span class=n>Predicate</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>filter</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>filter</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>boolean</span> <span class=n>removed</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>final</span> <span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>each</span> <span class=o>=</span> <span class=n>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>each</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>filter</span><span class=o>.</span><span class=na>test</span><span class=o>(</span><span class=n>each</span><span class=o>.</span><span class=na>next</span><span class=o>()))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>each</span><span class=o>.</span><span class=na>remove</span><span class=o>();</span>
</span></span><span class=line><span class=cl>                <span class=n>removed</span> <span class=o>=</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>removed</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// åˆ¤æ–­é›†åˆä¸­æ˜¯å¦æœ‰ä¸å­˜åœ¨é›†åˆ c ä¸­çš„å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>retainAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ¸…ç©ºæ‰€æœ‰å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=nf>clear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>Spliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>spliterator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Spliterators</span><span class=o>.</span><span class=na>spliterator</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=n>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>Stream</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>stream</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>StreamSupport</span><span class=o>.</span><span class=na>stream</span><span class=o>(</span><span class=n>spliterator</span><span class=o>(),</span> <span class=kc>false</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>Stream</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>parallelStream</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>StreamSupport</span><span class=o>.</span><span class=na>stream</span><span class=o>(</span><span class=n>spliterator</span><span class=o>(),</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>å¯ä»¥çœ‹å‡º</span> <span class=n>Collection</span> <span class=n>æœ‰æ·»åŠ </span><span class=err>ã€</span><span class=n>åˆ é™¤å’Œæ¸…é™¤å…ƒç´ ç­‰æ–¹æ³•</span><span class=err>ã€‚</span>
</span></span></code></pre></td></tr></table></div></div><p>Collection æ¥å£ä¸‹å±æœ‰ä¸‰ä¸ªå…³é”®å­å€Ÿå£ï¼Œåˆ†åˆ«ä¸º Setã€Queue å’Œ Listã€‚</p><a href=#set-æ¥å£><h2 id=set-æ¥å£><span class=hanchor arialabel=Anchor># </span>Set æ¥å£</h2></a><p>Set é›†åˆä¸ Collection é›†åˆåŸºæœ¬ç›¸åŒï¼Œæ²¡æœ‰æä¾›ä»»ä½•é¢å¤–çš„æ–¹æ³•ã€‚å®é™…ä¸Š Set å°±æ˜¯ Collectionï¼Œåªæ˜¯è¡Œä¸ºç•¥æœ‰ä¸åŒï¼ˆSet ä¸å…è®¸åŒ…å«é‡å¤å…ƒç´ ï¼‰ã€‚</p><p>Set é›†åˆä¸å…è®¸åŒ…å«ç›¸åŒçš„å…ƒç´ ï¼Œå¦‚æœè¯•å›¾æŠŠä¸¤ä¸ªç›¸åŒçš„å…ƒç´ åŠ å…¥åŒä¸€ä¸ª Set é›†åˆä¸­ï¼Œåˆ™ add() æ–¹æ³•ä¼šè¿”å› falseï¼Œä¸”æ–°å…ƒç´ ä¸ä¼šè¢«åŠ å…¥ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Set</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>isEmpty</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>Object</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>(</span><span class=n>T</span><span class=o>[]</span> <span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>containsAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>addAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>removeAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>clear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>Spliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>spliterator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Spliterators</span><span class=o>.</span><span class=na>spliterator</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=n>Spliterator</span><span class=o>.</span><span class=na>DISTINCT</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><a href=#hashset-ç±»><h3 id=hashset-ç±»><span class=hanchor arialabel=Anchor># </span>HashSet ç±»</h3></a><p>HashSet æ˜¯ Set æ¥å£çš„å…¸å‹å®ç°ï¼Œå®ç°äº† Set æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰æ·»åŠ é¢å¤–çš„æ–¹æ³•ï¼Œå¤§å¤šæ•°æ—¶å€™ä½¿ç”¨ Set é›†åˆæ—¶å°±æ˜¯ä½¿ç”¨è¿™ä¸ªå®ç°ç±»ã€‚ä½¿ç”¨çš„åº•å±‚ç»“æ„æ˜¯ HashMapï¼ŒæŒ‰ Hash ç®—æ³•æ¥å­˜å‚¨é›†åˆä¸­çš„å…ƒç´ ï¼Œå› æ­¤å…·æœ‰å¾ˆå¥½çš„å­˜å–å’ŒæŸ¥æ‰¾æ€§èƒ½ã€‚å®ƒçš„å®ç°å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>HashSet</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>AbstractSet</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>implements</span> <span class=n>Set</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>static</span> <span class=kd>final</span> <span class=kt>long</span> <span class=n>serialVersionUID</span> <span class=o>=</span> <span class=o>-</span><span class=n>5024744406713321676L</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>private</span> <span class=kd>transient</span> <span class=n>HashMap</span><span class=o>&lt;</span><span class=n>E</span><span class=o>,</span><span class=n>Object</span><span class=o>&gt;</span> <span class=n>map</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>Object</span> <span class=n>PRESENT</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Object</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=nf>HashSet</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=nf>HashSet</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;(</span><span class=n>Math</span><span class=o>.</span><span class=na>max</span><span class=o>((</span><span class=kt>int</span><span class=o>)</span> <span class=o>(</span><span class=n>c</span><span class=o>.</span><span class=na>size</span><span class=o>()/.</span><span class=na>75f</span><span class=o>)</span> <span class=o>+</span> <span class=n>1</span><span class=o>,</span> <span class=n>16</span><span class=o>));</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>addAll</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=nf>HashSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>,</span> <span class=kt>float</span> <span class=n>loadFactor</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;(</span><span class=n>initialCapacity</span><span class=o>,</span> <span class=n>loadFactor</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=nf>HashSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;(</span><span class=n>initialCapacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// dummy å¹¶æ²¡æœ‰ä½œç”¨ï¼Œåªæ˜¯ç”¨æ¥åŒºåˆ†é‡è½½æ„é€ æ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>Â  Â  <span class=n>HashSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>,</span> <span class=kt>float</span> <span class=n>loadFactor</span><span class=o>,</span> <span class=kt>boolean</span> <span class=n>dummy</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LinkedHashMap</span><span class=o>&lt;&gt;(</span><span class=n>initialCapacity</span><span class=o>,</span> <span class=n>loadFactor</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>iterator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=k>return</span> <span class=n>map</span><span class=o>.</span><span class=na>keySet</span><span class=o>().</span><span class=na>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>size</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=k>return</span> <span class=n>map</span><span class=o>.</span><span class=na>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isEmpty</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=k>return</span> <span class=n>map</span><span class=o>.</span><span class=na>isEmpty</span><span class=o>();</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=k>return</span> <span class=n>map</span><span class=o>.</span><span class=na>containsKey</span><span class=o>(</span><span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=k>return</span> <span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>e</span><span class=o>,</span> <span class=n>PRESENT</span><span class=o>)==</span><span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=k>return</span> <span class=n>map</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>o</span><span class=o>)==</span><span class=n>PRESENT</span><span class=o>;</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>clear</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>map</span><span class=o>.</span><span class=na>clear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹å‡º HashSet å†…éƒ¨å…¶å®æ˜¯ä¸€ä¸ª HashMapã€‚å®ƒçš„ add(E e) æ–¹æ³•ä¼šè°ƒç”¨ HashMap çš„ put æ–¹æ³•ï¼Œæ’å…¥çš„å€¼ä¼šä½œä¸º put çš„ key å¹¶ä¸”æŠŠ PRESENT ä½œä¸º put æ–¹æ³•çš„ value å€¼è¿›è¡Œæ’å…¥ï¼Œput æ–¹æ³•æ–°å¢ä¸€ä¸ªåŸæ¥ä¸å­˜åœ¨çš„å€¼ä¼šè¿”å› nullï¼Œå¦‚æœåŸæ¥å­˜åœ¨çš„è¯ä¼šè¿”å›åŸæ¥å­˜åœ¨çš„å€¼ï¼Œæ‰€ä»¥æ˜¯ HashMap ä¿è¯äº†å…ƒç´ ä¸é‡å¤ã€‚</p><a href=#ç‰¹ç‚¹><h4 id=ç‰¹ç‚¹><span class=hanchor arialabel=Anchor># </span>ç‰¹ç‚¹</h4></a><ul><li>ä¸èƒ½ä¿è¯å…ƒç´ çš„æ’åˆ—é¡ºåºï¼Œé¡ºåºå¯èƒ½ä¸æ·»åŠ é¡ºåºä¸åŒï¼Œé¡ºåºä¹Ÿæœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚</li><li>HashSet ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ª HashSetï¼Œåˆ™å¿…é¡»é€šè¿‡ä»£ç æ¥ä¿è¯å…¶åŒæ­¥ã€‚</li><li>é›†åˆå…ƒç´ å€¼å¯ä»¥æ˜¯ nullã€‚</li></ul><a href=#æ·»åŠ å…ƒç´ è§„åˆ™><h4 id=æ·»åŠ å…ƒç´ è§„åˆ™><span class=hanchor arialabel=Anchor># </span>æ·»åŠ å…ƒç´ è§„åˆ™</h4></a><p>ä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒï¼Œå…·ä½“åˆ†ä¸ºå¦‚ä¸‹å››ä¸ªæƒ…å†µï¼š</p><ol><li>equals() æ–¹æ³•è¿”å› falseï¼ŒhashCode() æ–¹æ³•è¿”å›ä¸ç›¸ç­‰ï¼ŒHashSet å°†ä¼šæŠŠå®ƒä»¬å­˜å‚¨åœ¨ä¸åŒçš„ä½ç½®ã€‚</li><li>equals() æ–¹æ³•è¿”å› trueï¼ŒhashCode() æ–¹æ³•è¿”å›ä¸ç›¸ç­‰ï¼ŒHashSet å°†ä¼šæŠŠå®ƒä»¬å­˜å‚¨åœ¨ä¸åŒçš„ä½ç½®ã€‚</li><li>equals() æ–¹æ³•è¿”å› trueï¼ŒhashCode() æ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼ŒHashSet å°†ä¼šæŠŠå®ƒä»¬å­˜å‚¨åœ¨ç›¸åŒçš„ä½ç½®ï¼Œåœ¨è¿™ä¸ªä½ç½®ä»¥é“¾è¡¨å¼ç»“æ„æ¥ä¿å­˜å¤šä¸ªå¯¹è±¡ã€‚è¿™æ˜¯å› ä¸ºå½“å‘ HashSet é›†åˆä¸­å­˜å…¥ä¸€ä¸ªå…ƒç´ æ—¶ï¼ŒHashSet ä¼šè°ƒç”¨å¯¹è±¡çš„ hashCode() æ–¹æ³•æ¥å¾—åˆ°å¯¹è±¡çš„ hashCode å€¼ï¼Œç„¶åæ ¹æ®è¯¥ hashCode å€¼æ¥å†³å®šè¯¥å¯¹è±¡å­˜å‚¨åœ¨ HashSet ä¸­å­˜å‚¨ä½ç½®ã€‚</li><li>equals() æ–¹æ³•è¿”å› trueï¼ŒhashCode() æ–¹æ³•è¿”å› trueï¼ŒHashSet å°†ä¸äºˆæ·»åŠ ã€‚</li></ol><p>å¦‚æœ HashSet ä¸­ä¸¤ä¸ªä»¥ä¸Šçš„å…ƒç´ å…·æœ‰ç›¸åŒçš„ hashCode å€¼ï¼Œå°†ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚æ‰€ä»¥å¦‚æœé‡å†™ç±»çš„ equals() æ–¹æ³•å’Œ hashCode() æ–¹æ³•æ—¶ï¼Œåº”å°½é‡ä¿è¯ä¸¤ä¸ªå¯¹è±¡é€šè¿‡ hashCode() æ–¹æ³•è¿”å›å€¼ç›¸ç­‰æ—¶ï¼Œé€šè¿‡ equals() æ–¹æ³•æ¯”è¾ƒè¿”å› trueã€‚</p><a href=#linkedhashset-ç±»><h3 id=linkedhashset-ç±»><span class=hanchor arialabel=Anchor># </span>LinkedHashSet ç±»</h3></a><p>LinkedHashSet æ˜¯ HashSet çš„å­ç±»ï¼Œä¹Ÿæ˜¯æ ¹æ®å…ƒç´ çš„ hashCode å€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼ŒåŒæ—¶ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºï¼Œä½¿å¾—å…ƒç´ æ˜¯ä»¥æ’å…¥çš„é¡ºåºæ¥ä¿å­˜çš„ã€‚å½“éå† LinkedHashSet é›†åˆé‡Œçš„å…ƒç´ æ—¶ï¼ŒLinkedHashSet å°†ä¼šæŒ‰å…ƒç´ çš„æ·»åŠ é¡ºåºæ¥è®¿é—®é›†åˆé‡Œçš„å…ƒç´ ã€‚ä½†æ˜¯ç”±äºè¦ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºï¼Œåœ¨æ€§èƒ½ä¸Šç•¥ä½ä¸ HashSetï¼Œä½†åœ¨è¿­ä»£è®¿é—® Set é‡Œçš„å…¨éƒ¨å…ƒç´ æ—¶æœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚</p><p>å®ƒçš„å®ç°å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>LinkedHashSet</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>HashSet</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>implements</span> <span class=n>Set</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>long</span> <span class=n>serialVersionUID</span> <span class=o>=</span> <span class=o>-</span><span class=n>2851667679971038690L</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=nf>LinkedHashSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>,</span> <span class=kt>float</span> <span class=n>loadFactor</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=kd>super</span><span class=o>(</span><span class=n>initialCapacity</span><span class=o>,</span> <span class=n>loadFactor</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=nf>LinkedHashSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=kd>super</span><span class=o>(</span><span class=n>initialCapacity</span><span class=o>,</span> <span class=o>.</span><span class=na>75f</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=nf>LinkedHashSet</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=kd>super</span><span class=o>(</span><span class=n>16</span><span class=o>,</span> <span class=o>.</span><span class=na>75f</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=nf>LinkedHashSet</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=kd>super</span><span class=o>(</span><span class=n>Math</span><span class=o>.</span><span class=na>max</span><span class=o>(</span><span class=n>2</span><span class=o>*</span><span class=n>c</span><span class=o>.</span><span class=na>size</span><span class=o>(),</span> <span class=n>11</span><span class=o>),</span> <span class=o>.</span><span class=na>75f</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>addAll</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>public</span> <span class=n>Spliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>spliterator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=k>return</span> <span class=n>Spliterators</span><span class=o>.</span><span class=na>spliterator</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=n>Spliterator</span><span class=o>.</span><span class=na>DISTINCT</span> <span class=o>|</span>Â 
</span></span><span class=line><span class=cl><span class=n>Spliterator</span><span class=o>.</span><span class=na>ORDERED</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒçš„æ„é€ æ–¹æ³•éƒ½æ˜¯é€šè¿‡è°ƒç”¨çˆ¶ç±» HashSet çš„ä¸‰ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•ã€‚</p><p>HashSet çš„æ„é€ åˆ†æ–¹æ³•å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>HashSet</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>,</span> <span class=kt>float</span> <span class=n>loadFactor</span><span class=o>,</span> <span class=kt>boolean</span> <span class=n>dummy</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LinkedHashMap</span><span class=o>&lt;&gt;(</span><span class=n>initialCapacity</span><span class=o>,</span> <span class=n>loadFactor</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>LinkedHashMap çš„å®ç°è§åæ–‡ã€‚</p><a href=#treeset-ç±»><h3 id=treeset-ç±»><span class=hanchor arialabel=Anchor># </span>TreeSet ç±»</h3></a><p>TreeSet æ˜¯ SortedSet æ¥å£çš„å®ç°ç±»ï¼Œæ­£å¦‚ SortedSet åå­—æ‰€æš—ç¤ºçš„ï¼ŒTreeSet å¯ä»¥ç¡®ä¿é›†åˆå…ƒç´ å¤„äºæ’åºçŠ¶æ€ã€‚æ­¤å¤–ï¼ŒTreeSet è¿˜æä¾›äº†å‡ ä¸ªé¢å¤–çš„æ–¹æ³•ã€‚</p><a href=#ä¸»è¦æ–¹æ³•><h4 id=ä¸»è¦æ–¹æ³•><span class=hanchor arialabel=Anchor># </span>ä¸»è¦æ–¹æ³•</h4></a><p>comparator()ï¼šè¿”å›å¯¹æ­¤ set ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºçš„æ¯”è¾ƒå™¨ï¼›å¦‚æœæ­¤ set ä½¿ç”¨å…¶å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œåˆ™è¿”å› nullã€‚</p><p>first()ï¼šè¿”å›æ­¤ set ä¸­å½“å‰ç¬¬ä¸€ä¸ªï¼ˆæœ€ä½ï¼‰å…ƒç´ ã€‚</p><p>last()ï¼šè¿”å›æ­¤ set ä¸­å½“å‰æœ€åä¸€ä¸ªï¼ˆæœ€é«˜ï¼‰å…ƒç´ ã€‚</p><p>lower(E e)ï¼šè¿”å›æ­¤ set ä¸­ä¸¥æ ¼å°äºç»™å®šå…ƒç´ çš„æœ€å¤§å…ƒç´ ï¼›å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å…ƒç´ ï¼Œåˆ™è¿”å› nullã€‚</p><p>higher(E e)ï¼šè¿”å›æ­¤ set ä¸­ä¸¥æ ¼å¤§äºç»™å®šå…ƒç´ çš„æœ€å°å…ƒç´ ï¼›å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å…ƒç´ ï¼Œåˆ™è¿”å› nullã€‚</p><p>floor(E e)ï¼šè¿”å›æ­¤ set ä¸­å°äºç­‰äºç»™å®šå…ƒç´ çš„æœ€å°å€¼ï¼›å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å…ƒç´ ï¼Œåˆ™è¿”å› nullã€‚</p><p>ceiling(E e)ï¼šè¿”å›æ­¤ set ä¸­å¤§äºç»™å®šå…ƒç´ çš„æœ€å¤§å€¼ï¼›å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å…ƒç´ ï¼Œåˆ™è¿”å› nullã€‚</p><p>subSet(E fromElement, E toElement)ï¼šè¿”å›æ­¤ set çš„éƒ¨åˆ†è§†å›¾ï¼Œå…¶å…ƒç´ ä» fromElementï¼ˆåŒ…æ‹¬ï¼‰åˆ° toElementï¼ˆä¸åŒ…æ‹¬ï¼‰ã€‚</p><p>headSet(E toElement)ï¼šè¿”å›æ­¤ set çš„éƒ¨åˆ†è§†å›¾ï¼Œå…¶å…ƒç´ å°äº toElementã€‚</p><p>tailSet(E fromElement)ï¼šè¿”å›æ­¤ set çš„éƒ¨åˆ†è§†å›¾ï¼Œå…¶å…ƒç´ å¤§äºç­‰äº fromElementã€‚</p><a href=#æ’åºæ–¹å¼><h4 id=æ’åºæ–¹å¼><span class=hanchor arialabel=Anchor># </span>æ’åºæ–¹å¼</h4></a><p>TreeSet ä¸­æ‰€è°“çš„æœ‰åºï¼Œä¸åŒäºä¹‹å‰æ‰€è®²çš„æ’å…¥é¡ºåºï¼Œè€Œæ˜¯é€šè¿‡é›†åˆä¸­å…ƒç´ å±æ€§è¿›è¡Œæ’åºæ–¹å¼æ¥å®ç°çš„ã€‚TreeSet æ”¯æŒä¸¤ç§æ’åºæ–¹æ³•ï¼šè‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒTreeSet é‡‡ç”¨è‡ªç„¶æ’åºã€‚</p><a href=#strongè‡ªç„¶æ’åºstrong><h5 id=strongè‡ªç„¶æ’åºstrong><span class=hanchor arialabel=Anchor># </span><strong>è‡ªç„¶æ’åº</strong></h5></a><p>TreeSet ä¼šè°ƒç”¨é›†åˆä¸­å…ƒç´ æ‰€å±ç±»çš„ compareTo(Object obj) æ–¹æ³•æ¥æ¯”è¾ƒå…ƒç´ ä¹‹é—´çš„å¤§å°å…³ç³»ï¼Œç„¶åå°†é›†åˆå…ƒç´ æŒ‰å‡åºæ’åˆ—ï¼Œå³æŠŠé€šè¿‡ compareTo(Object obj) æ–¹æ³•æ¯”è¾ƒåæ¯”è¾ƒå¤§çš„çš„å¾€åæ’ã€‚è¿™ç§æ–¹å¼å°±æ˜¯è‡ªç„¶æ’åºã€‚</p><p>é™¤äº†å·²ç»å®ç° Comparable æ¥å£ç±»ï¼ˆString å’Œ Integer ç­‰ï¼‰ä¹‹å¤–ï¼Œå¦‚æœè¯•å›¾æŠŠä¸€ä¸ªå¯¹è±¡æ·»åŠ åˆ° TreeSet æ—¶ï¼Œåˆ™è¯¥å¯¹è±¡çš„ç±»å¿…é¡»å®ç° Comparable æ¥å£ï¼Œå¦åˆ™å°±ä¼šå‡ºç°å¼‚å¸¸ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>TreeSet ä¸­åªèƒ½æ·»åŠ åŒä¸€ç§ç±»å‹çš„å¯¹è±¡ï¼Œå¦åˆ™æ— æ³•æ¯”è¾ƒï¼Œä¼šå‡ºç°å¼‚å¸¸ã€‚</p><p>å½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä¸å¦ä¸€ä¸ªå¯¹è±¡æ¯”è¾ƒæ—¶ï¼Œä¾‹å¦‚ obj1.compareTo(obj2)ï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å› 0ï¼Œåˆ™è¡¨æ˜ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼›å¦‚æœè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ­£æ•´æ•°ï¼Œåˆ™è¡¨æ˜ obj1 å¤§äº obj2ï¼›å¦‚æœè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªè´Ÿæ•´æ•°ï¼Œåˆ™è¡¨æ˜ obj1 å°äº obj2ã€‚</p><a href=#strongå®šåˆ¶æ’åºstrong><h5 id=strongå®šåˆ¶æ’åºstrong><span class=hanchor arialabel=Anchor># </span><strong>å®šåˆ¶æ’åº</strong></h5></a><p>å®šåˆ¶æ’åºæ˜¯é€šè¿‡ Comparator æ¥å£å®ç°çš„ã€‚è¯¥æ¥å£åŒ…å«ä¸€ä¸ª int compare(T o1,T o2) æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºæ¯”è¾ƒ o1, o2 çš„å¤§å°ï¼šå¦‚æœè¯¥æ–¹æ³•è¿”å›æ­£æ•´æ•°ï¼Œåˆ™è¡¨æ˜ o1 å¤§äº o2ï¼›å¦‚æœè¯¥æ–¹æ³•è¿”å› 0ï¼Œåˆ™è¡¨æ˜ o1 ç­‰äº o2ï¼›å¦‚æœè¯¥æ–¹æ³•è¿”å›è´Ÿæ•´æ•°ï¼Œåˆ™è¡¨æ˜ o1 å°äº o2ã€‚</p><p>å¦‚æœè¦å®ç°å®šåˆ¶æ’åºï¼Œåˆ™éœ€è¦åœ¨åˆ›å»º TreeSet æ—¶ï¼Œè°ƒç”¨ä¸€ä¸ªå¸¦å‚æ„é€ å™¨ï¼Œä¼ å…¥ Comparator å¯¹ è±¡ã€‚å¹¶æœ‰è¯¥ Comparator å¯¹è±¡è´Ÿè´£é›†åˆå…ƒç´ çš„æ’åºé€»è¾‘ï¼Œæ­¤æ—¶é›†åˆå…ƒç´ å¯ä»¥ä¸å¿…å®ç° Comparable æ¥å£ã€‚</p><a href=#åˆ¤æ–­å…ƒç´ ç›¸ç­‰><h4 id=åˆ¤æ–­å…ƒç´ ç›¸ç­‰><span class=hanchor arialabel=Anchor># </span>åˆ¤æ–­å…ƒç´ ç›¸ç­‰</h4></a><p>å¯¹äº TreeSet é›†åˆè€Œè¨€ï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„å”¯ä¸€æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ªå¯¹è±¡é€šè¿‡ compareTo(Object obj) æ–¹æ³•æ¯”è¾ƒæ˜¯å¦è¿”å› 0â€”â€”å¦‚æœé€šè¿‡ compareTo(Object obj) æ–¹æ³•æ¯”è¾ƒè¿”å› 0ï¼ŒTreeSet åˆ™ä¼šè®¤ä¸ºå®ƒä»¬ç›¸ç­‰ï¼Œä¸äºˆæ·»åŠ å…¥é›†åˆå†…ï¼›å¦åˆ™å°±è®¤ä¸ºå®ƒä»¬ä¸ç›¸ç­‰ï¼Œæ·»åŠ åˆ°é›†åˆå†…ã€‚</p><p><strong>TreeSet æ˜¯æ ¹æ®çº¢é»‘æ ‘ç»“æ„æ‰¾åˆ°é›†åˆå…ƒç´ çš„å­˜å‚¨ä½ç½®ã€‚</strong></p><p>æ³¨æ„ï¼š</p><ol><li>æ— è®ºä½¿ç”¨è‡ªç„¶æ’åºè¿˜æ˜¯å®šåˆ¶æ’åºï¼Œéƒ½å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘å®ç°å„ç§å„æ ·çš„æ’åºæ–¹å¼ã€‚</li><li>å¦‚æœå‘ TreeSet ä¸­æ·»åŠ äº†ä¸€ä¸ªå¯å˜å¯¹è±¡åï¼Œå¹¶ä¸”åé¢ç¨‹åºä¿®æ”¹äº†è¯¥å¯å˜å¯¹è±¡çš„å®ä¾‹å˜é‡ï¼Œè¿™å°†å¯¼è‡´å®ƒä¸å…¶ä»–å¯¹è±¡çš„å¤§å°é¡ºåºå‘ç”Ÿäº†æ”¹å˜ï¼Œä½† TreeSet ä¸ä¼šå†æ¬¡è°ƒæ•´å®ƒä»¬ã€‚</li><li>TreeSet ä¹Ÿæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</li></ol><a href=#hashset-å’Œ-treeset-å¯¹æ¯”><h3 id=hashset-å’Œ-treeset-å¯¹æ¯”><span class=hanchor arialabel=Anchor># </span>HashSet å’Œ TreeSet å¯¹æ¯”</h3></a><p><strong>æ€§èƒ½ï¼šHashSet > LinkedHashSet >TreeSet</strong></p><ul><li>HashSet ä»¥ hash ç®—æ³•è¿›è¡Œä½ç½®å­˜å‚¨ï¼Œç‰¹åˆ«é€‚åˆç”¨äºæ·»åŠ ã€æŸ¥è¯¢æ“ä½œã€‚</li><li>LinkedHashSet ç”±äºè¦ç»´æŠ¤é“¾è¡¨ï¼Œæ€§èƒ½æ¯” HashSet å·®ç‚¹ï¼Œä½†æ˜¯æœ‰äº†é“¾è¡¨ï¼ŒLinkedHashSet æ›´é€‚åˆäºæ’å…¥ã€åˆ é™¤ä»¥åŠéå†æ“ä½œã€‚</li><li>TreeSet éœ€è¦é¢å¤–çš„çº¢é»‘æ ‘ç®—æ³•æ¥ç»´æŠ¤é›†åˆçš„æ¬¡åºï¼Œæ€§èƒ½æœ€æ¬¡ã€‚</li></ul><p>ä½†æ˜¯å…·ä½“ä½¿ç”¨è¦è€ƒè™‘å…·ä½“çš„ä½¿ç”¨åœºæ™¯ã€‚</p><p>å½“éœ€è¦ä¸€ä¸ªç‰¹å®šæ’åºçš„é›†åˆæ—¶ï¼Œä½¿ç”¨ TreeSet é›†åˆã€‚</p><p>å½“ç»å¸¸ä½¿ç”¨æ·»åŠ ã€æŸ¥è¯¢æ“ä½œæ—¶ï¼Œä½¿ç”¨ HashSetã€‚</p><p>å½“ç»å¸¸æ’å…¥æ’åºæˆ–ä½¿ç”¨åˆ é™¤ã€æ’å…¥åŠéå†æ“ä½œæ—¶ï¼Œä½¿ç”¨ LinkedHashSetã€‚</p><a href=#queue-æ¥å£><h2 id=queue-æ¥å£><span class=hanchor arialabel=Anchor># </span>Queue æ¥å£</h2></a><p>Queue ç”¨æˆ·æ¨¡æ‹Ÿé˜Ÿåˆ—è¿™ç§æ•°æ®ç»“æ„ï¼Œé˜Ÿåˆ—é€šå¸¸æ˜¯æŒ‡â€œå…ˆè¿›å…ˆå‡ºâ€(FIFOï¼Œfirst-in-first-out)çš„å®¹å™¨ã€‚é˜Ÿåˆ—çš„å¤´éƒ¨æ˜¯åœ¨é˜Ÿåˆ—ä¸­å­˜æ”¾æ—¶é—´æœ€é•¿çš„å…ƒç´ ï¼Œé˜Ÿåˆ—çš„å°¾éƒ¨æ˜¯ä¿å­˜åœ¨é˜Ÿåˆ—ä¸­å­˜æ”¾æ—¶é—´æœ€çŸ­çš„å…ƒç´ ã€‚æ–°å…ƒç´ æ’å…¥ï¼ˆofferï¼‰åˆ°é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œè®¿é—®å…ƒç´ ï¼ˆpollï¼‰æ“ä½œä¼šè¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ã€‚é€šå¸¸é˜Ÿåˆ—ä¸å…è®¸éšæœºè®¿é—®å…¶ä¸­çš„å…ƒç´ ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Queue</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=c1>// æ’å…¥å…ƒç´ ï¼Œå®¹é‡å·²æ»¡æ—¶æŠ›å‡º IllegalStateException å¼‚å¸¸
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â Â <span class=c1>// æ’å…¥å…ƒç´ ï¼Œå®¹é‡å·²æ»¡æ—¶è¿”å› false
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>boolean</span> <span class=nf>offer</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç§»é™¤é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ å¹¶è¿”å›ï¼Œå½“é›†åˆä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>E</span> <span class=nf>remove</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ç§»é™¤é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ å¹¶è¿”å›ï¼Œå½“é›†åˆä¸ºç©ºæ—¶è¿”å› null
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>E</span> <span class=nf>poll</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è·å–é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå½“é›†åˆä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>E</span> <span class=nf>element</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è·å–é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå½“é›†åˆä¸ºç©ºæ—¶è¿”å› null
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>E</span> <span class=nf>peek</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><a href=#deque-æ¥å£><h3 id=deque-æ¥å£><span class=hanchor arialabel=Anchor># </span>Deque æ¥å£</h3></a><p>Deque æ¥å£æ˜¯ Queue æ¥å£çš„å­æ¥å£ï¼Œå®ƒä»£è¡¨ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ã€‚</p><p>å°±æ˜¯è¯´å¯¹äºè¿™ä¸ªé˜Ÿåˆ—å®¹å™¨ï¼Œæ—¢å¯ä»¥ä»å¤´éƒ¨æ’å…¥ä¹Ÿå¯ä»¥ä»å°¾éƒ¨æ’å…¥ï¼Œæ—¢å¯ä»¥ä»å¤´éƒ¨è·å–ï¼Œä¹Ÿå¯ä»¥ä»å°¾éƒ¨è·å–ï¼Œå…¶æœºåˆ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_095517.png width=auto alt>
LinkedList ä¹Ÿå®ç°äº† Deque æ¥å£ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¢«å½“ä½œåŒç«¯é˜Ÿåˆ—ä½¿ç”¨ã€‚</p><a href=#ä¸»è¦æ–¹æ³•-1><h4 id=ä¸»è¦æ–¹æ³•-1><span class=hanchor arialabel=Anchor># </span>ä¸»è¦æ–¹æ³•</h4></a><p>void addFirst(E e):å°†æŒ‡å®šå…ƒç´ æ’å…¥æ­¤åˆ—è¡¨çš„å¼€å¤´ã€‚</p><p>void addLast(E e): å°†æŒ‡å®šå…ƒç´ æ·»åŠ åˆ°æ­¤åˆ—è¡¨çš„ç»“å°¾ã€‚</p><p>E getFirst(E e): è¿”å›æ­¤åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>E getLast(E e): è¿”å›æ­¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</p><p>boolean offerFirst(E e): åœ¨æ­¤åˆ—è¡¨çš„å¼€å¤´æ’å…¥æŒ‡å®šçš„å…ƒç´ ã€‚</p><p>boolean offerLast(E e): åœ¨æ­¤åˆ—è¡¨æœ«å°¾æ’å…¥æŒ‡å®šçš„å…ƒç´ ã€‚</p><p>E peekFirst(E e): è·å–ä½†ä¸ç§»é™¤æ­¤åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›å¦‚æœæ­¤åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™è¿”å› nullã€‚</p><p>E peekLast(E e): è·å–ä½†ä¸ç§»é™¤æ­¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼›å¦‚æœæ­¤åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™è¿”å› nullã€‚</p><p>E pollFirst(E e): è·å–å¹¶ç§»é™¤æ­¤åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼›å¦‚æœæ­¤åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™è¿”å› nullã€‚</p><p>E pollLast(E e): è·å–å¹¶ç§»é™¤æ­¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼›å¦‚æœæ­¤åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™è¿”å› nullã€‚</p><p>E removeFirst(E e): ç§»é™¤å¹¶è¿”å›æ­¤åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>boolean removeFirstOccurrence(Objcet o): ä»æ­¤åˆ—è¡¨ä¸­ç§»é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ï¼ˆä»å¤´éƒ¨åˆ°å°¾éƒ¨éå†åˆ—è¡¨æ—¶ï¼‰ã€‚</p><p>E removeLast(E e): ç§»é™¤å¹¶è¿”å›æ­¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</p><p>boolean removeLastOccurrence(Objcet o): ä»æ­¤åˆ—è¡¨ä¸­ç§»é™¤æœ€åä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ï¼ˆä»å¤´éƒ¨åˆ°å°¾éƒ¨éå†åˆ—è¡¨æ—¶ï¼‰ã€‚</p><p>ä»ä¸Šé¢æ–¹æ³•ä¸­å¯ä»¥çœ‹å‡ºï¼ŒDeque ä¸ä»…å¯ä»¥å½“æˆåŒç«¯é˜Ÿåˆ—ä½¿ç”¨ï¼Œè€Œä¸”å¯ä»¥è¢«å½“æˆæ ˆæ¥ä½¿ç”¨ï¼Œå› ä¸ºè¯¥ç±»é‡Œè¿˜åŒ…å«äº† pop(å‡ºæ ˆ)ã€push(å…¥æ ˆ)ä¸¤ä¸ªæ–¹æ³•ã€‚</p><a href=#ä¸-queuestack-çš„å…³ç³»><h4 id=ä¸-queuestack-çš„å…³ç³»><span class=hanchor arialabel=Anchor># </span>ä¸ Queueã€Stack çš„å…³ç³»</h4></a><p>å½“ Deque å½“åš Queue é˜Ÿåˆ—ä½¿ç”¨æ—¶ï¼ˆFIFOï¼‰ï¼Œæ·»åŠ å…ƒç´ æ˜¯æ·»åŠ åˆ°é˜Ÿå°¾ï¼Œåˆ é™¤æ—¶åˆ é™¤çš„æ˜¯å¤´éƒ¨å…ƒç´ ã€‚ä» Queue æ¥å£ç»§æ‰¿çš„æ–¹æ³•å¯¹åº” Deque çš„æ–¹æ³•å¦‚ä¸‹ï¼š
<img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_095628.png width=auto alt>
Deque ä¹Ÿèƒ½å½“ Stack æ ˆç”¨ï¼ˆLIFOï¼‰ã€‚è¿™æ—¶å…¥æ ˆã€å‡ºæ ˆå…ƒç´ éƒ½æ˜¯åœ¨åŒç«¯é˜Ÿåˆ—çš„å¤´éƒ¨è¿›è¡Œã€‚Deque ä¸­å’Œ Stack å¯¹åº”çš„æ–¹æ³•å¦‚ä¸‹ï¼š
<img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_095654.png width=auto alt>
<strong>æ³¨æ„ï¼š</strong>Stack è¿‡äºå¤è€ï¼Œå¹¶ä¸”å®ç°åœ°éå¸¸ä¸å¥½ï¼Œå› æ­¤ç°åœ¨åŸºæœ¬å·²ç»ä¸ç”¨äº†ï¼Œå¯ä»¥ç›´æ¥ç”¨ Deque æ¥ä»£æ›¿ Stack è¿›è¡Œæ ˆæ“ä½œã€‚</p><a href=#arraydeque-ç±»><h4 id=arraydeque-ç±»><span class=hanchor arialabel=Anchor># </span>ArrayDeque ç±»</h4></a><p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ•°ç»„å®ç°çš„ Dequeã€‚æ—¢ç„¶åº•å±‚æ˜¯æ•°ç»„é‚£è‚¯å®šä¹Ÿå¯ä»¥æŒ‡å®šå…¶ capacityï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šï¼Œ<strong>é»˜è®¤é•¿åº¦æ˜¯ 16</strong>ï¼Œç„¶åæ ¹æ®æ·»åŠ çš„å…ƒç´ çš„ä¸ªæ•°ï¼ŒåŠ¨æ€æ‰©å±•ã€‚ArrayDeque ç”±äºæ˜¯ä¸¤ç«¯é˜Ÿåˆ—ï¼Œæ‰€ä»¥å…¶é¡ºåºæ˜¯æŒ‰ç…§å…ƒç´ æ’å…¥æ•°ç»„ä¸­å¯¹åº”ä½ç½®äº§ç”Ÿçš„ï¼ˆä¸‹é¢ä¼šå…·ä½“è¯´æ˜ï¼‰ã€‚</p><p>ç”±äºæœ¬èº«æ•°æ®ç»“æ„çš„é™åˆ¶ï¼ŒArrayDeque æ²¡æœ‰åƒ ArrayList ä¸­çš„ trimToSize æ–¹æ³•å¯ä»¥ä¸ºè‡ªå·±ç˜¦èº«ã€‚ArrayDeque çš„ä½¿ç”¨æ–¹æ³•å°±æ˜¯ä¸Šé¢çš„ Deque çš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŸºæœ¬æ²¡æœ‰å¯¹ Deque æ‹“å±•ä»€ä¹ˆæ–¹æ³•ã€‚</p><a href=#strongå®ç°åŸç†strong><h5 id=strongå®ç°åŸç†strong><span class=hanchor arialabel=Anchor># </span><strong>å®ç°åŸç†</strong></h5></a><p>ArrayDeque ä¸ºäº†æ»¡è¶³å¯ä»¥åŒæ—¶åœ¨æ•°ç»„ä¸¤ç«¯æ’å…¥æˆ–åˆ é™¤å…ƒç´ çš„éœ€æ±‚ï¼Œå…¶å†…éƒ¨çš„åŠ¨æ€æ•°ç»„è¿˜å¿…é¡»æ˜¯å¾ªç¯çš„ï¼Œå³å¾ªç¯æ•°ç»„ï¼ˆcircular arrayï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°ç»„çš„ä»»ä½•ä¸€ç‚¹éƒ½å¯èƒ½è¢«çœ‹ä½œèµ·ç‚¹æˆ–è€…ç»ˆç‚¹ã€‚</p><p>ArrayDeque ç»´æŠ¤äº†ä¸¤ä¸ªå˜é‡ï¼Œè¡¨ç¤º ArrayDeque çš„å¤´å’Œå°¾ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//å…·ä½“å­˜æ”¾å…ƒç´ çš„æ•°ç»„ï¼Œæ•°ç»„å¤§å°ä¸€å®šæ˜¯2çš„å¹‚æ¬¡æ–¹
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>transient</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>elements</span><span class=o>;</span> <span class=c1>// non-private toÂ 
</span></span></span><span class=line><span class=cl><span class=c1>//é˜Ÿåˆ—å¤´ç´¢å¼•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>transient</span> <span class=kt>int</span> <span class=n>head</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=c1>//é˜Ÿåˆ—å°¾ç´¢å¼•
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>transient</span> <span class=kt>int</span> <span class=n>tail</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=c1>//é»˜è®¤çš„æœ€å°åˆå§‹åŒ–å®¹é‡ï¼Œå³ä¼ å…¥çš„å®¹é‡å°äº8å®¹é‡ä¸º8ï¼Œè€Œé»˜è®¤å®¹é‡æ˜¯16
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>MIN_INITIAL_CAPACITY</span> <span class=o>=</span> <span class=n>8</span><span class=o>;</span>
</span></span></code></pre></td></tr></table></div></div><p>å½“å‘å¤´éƒ¨æ’å…¥å…ƒç´ æ—¶ï¼Œhead ä¸‹æ ‡å‡ä¸€ç„¶åæ’å…¥å…ƒç´ ã€‚è€Œ tail è¡¨ç¤ºçš„ç´¢å¼•ä¸ºå½“å‰æœ«å°¾å…ƒç´ è¡¨ç¤ºçš„ç´¢å¼•å€¼åŠ ä¸€ã€‚è‹¥å½“å‘å°¾éƒ¨æ’å…¥å…ƒç´ æ—¶ï¼Œç›´æ¥å‘ tail è¡¨ç¤ºçš„ä½ç½®æ’å…¥ï¼Œç„¶å tail å†å‡ä¸€ã€‚
<img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_095736.png width=auto alt></p><p>æœ€åˆå¤´éƒ¨å’Œå°¾éƒ¨ç´¢å¼•éƒ½æ˜¯ 0ï¼ŒaddLast æ–¹å‘å¾€å³ï¼ŒaddFirst æ–¹å‘å¾€å·¦ï¼Œæ‰€ä»¥æ•°ç»„ä¸­é—´å¯èƒ½æ˜¯ç©ºçš„ï¼Œå½“å¤´æŒ‡é’ˆå’Œå°¾æŒ‡é’ˆç›¸é‡çš„æ—¶å€™å¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œå¹¶å¯¹å…ƒç´ ä½ç½®è¿›è¡Œè°ƒæ•´ã€‚</p><p>æ³¨æ„ï¼šArrayDeque ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å½“ä½œä¸ºæ ˆä½¿ç”¨æ—¶ï¼Œæ€§èƒ½æ¯” Stack å¥½ï¼›å½“ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨æ—¶ï¼Œæ€§èƒ½æ¯” LinkedList å¥½ã€‚</p><a href=#priorityqueue-ç±»><h3 id=priorityqueue-ç±»><span class=hanchor arialabel=Anchor># </span>PriorityQueue ç±»</h3></a><p>PriorityQueue æ˜¯ Java ä¸­å”¯ä¸€ä¸€ä¸ª Queue æ¥å£çš„ç›´æ¥å®ç°ã€‚PriorityQueue ä¿å­˜é˜Ÿåˆ—å…ƒç´ çš„é¡ºåºä¸æ˜¯æŒ‰åŠ å…¥é˜Ÿåˆ—çš„é¡ºåºï¼Œè€Œæ˜¯æŒ‰ç‰¹å®šè§„åˆ™è¿›è¡Œæ’åºçš„ã€‚å› æ­¤å½“è°ƒç”¨ peek() æˆ– poll() æ–¹æ³•å–å‡ºé˜Ÿåˆ—ä¸­å¤´éƒ¨çš„å…ƒç´ æ—¶ï¼Œå¹¶ä¸æ˜¯å–å‡ºæœ€å…ˆè¿›å…¥é˜Ÿåˆ—çš„å…ƒç´ ï¼Œè€Œæ˜¯å–å‡ºé˜Ÿåˆ—ä¸­æŒ‰è§„åˆ™æ’åºæœ€å°çš„å…ƒç´ ã€‚</p><a href=#æ–¹æ³•æ¦‚è§ˆ><h4 id=æ–¹æ³•æ¦‚è§ˆ><span class=hanchor arialabel=Anchor># </span>æ–¹æ³•æ¦‚è§ˆ</h4></a><p>PriorityQueue å®ç°äº† Queue æ¥å£ï¼Œä¸‹é¢åˆ—ä¸¾å‡º PriorityQueue çš„æ–¹æ³•ã€‚
<img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_095901.png width=auto alt></p><a href=#æ’åºæ–¹å¼-1><h4 id=æ’åºæ–¹å¼-1><span class=hanchor arialabel=Anchor># </span>æ’åºæ–¹å¼</h4></a><p>ä¸ TreeSet ç›¸åŒï¼ŒPriorityQueue ä¸­çš„å…ƒç´ å¯ä»¥é»˜è®¤è‡ªç„¶æ’åºï¼ˆä¹Ÿå°±æ˜¯æ•°å­—é»˜è®¤æ˜¯å°çš„åœ¨é˜Ÿåˆ—å¤´ï¼Œå­—ç¬¦ä¸²åˆ™æŒ‰å­—å…¸åºæ’åˆ—ï¼‰æˆ–è€…é€šè¿‡æä¾›çš„ Comparatorï¼ˆæ¯”è¾ƒå™¨ï¼‰åœ¨é˜Ÿåˆ—å®ä¾‹åŒ–æ—¶æŒ‡å®šçš„æ’åºæ–¹å¼ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>é˜Ÿåˆ—çš„å¤´æ˜¯æŒ‰æŒ‡å®šæ’åºæ–¹å¼çš„æœ€å°å…ƒç´ ã€‚å¦‚æœå¤šä¸ªå…ƒç´ éƒ½æ˜¯æœ€å°å€¼ï¼Œåˆ™å¤´æ˜¯å…¶ä¸­ä¸€ä¸ªå…ƒç´ â€”â€”é€‰æ‹©æ–¹æ³•æ˜¯ä»»æ„çš„ã€‚</li><li>å½“ PriorityQueue ä¸­æ²¡æœ‰æŒ‡å®š Comparator æ—¶ï¼ŒåŠ å…¥ PriorityQueue çš„å…ƒç´ å¿…é¡»å®ç° Comparable æ¥å£ï¼ˆå³å…ƒç´ æ˜¯å¯æ¯”è¾ƒçš„ï¼‰ï¼Œå¦åˆ™ä¼šå¯¼è‡´ ClassCastExceptionã€‚</li></ol><a href=#å®ç°åŸç†><h4 id=å®ç°åŸç†><span class=hanchor arialabel=Anchor># </span>å®ç°åŸç†</h4></a><p>PriorityQueue æœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œåœ¨è¿™ä¸€æ–¹é¢ä¸ ArrayList æ˜¯ä¸€è‡´çš„ã€‚å®ƒçš„æˆå‘˜å˜é‡å’Œæ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>PriorityQueue</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>AbstractQueue</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=kd>implements</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>Serializable</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>DEFAULT_INITIAL_CAPACITY</span> <span class=o>=</span> <span class=n>11</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>transient</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>queue</span><span class=o>;</span> <span class=c1>// non-private to simplify nested class access
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>size</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>final</span> <span class=n>Comparator</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>comparator</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>transient</span> <span class=kt>int</span> <span class=n>modCount</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=c1>// non-private to simplify nested class access
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>PriorityQueue</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=o>(</span><span class=n>DEFAULT_INITIAL_CAPACITY</span><span class=o>,</span> <span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>PriorityQueue</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=o>(</span><span class=n>initialCapacity</span><span class=o>,</span> <span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>PriorityQueue</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                         <span class=n>Comparator</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>comparator</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// Note: This restriction of at least one is not actually 
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=n>needed</span><span class=o>,</span><span class=n>but</span> <span class=n>continues</span> <span class=k>for</span> <span class=n>1</span><span class=o>.</span><span class=na>5</span> <span class=n>compatibility</span>
</span></span><span class=line><span class=cl>      <span class=nf>if</span> <span class=o>(</span><span class=n>initialCapacity</span> <span class=o>&lt;</span> <span class=n>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=n>IllegalArgumentException</span><span class=o>();</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=o>.</span><span class=na>queue</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Object</span><span class=o>[</span><span class=n>initialCapacity</span><span class=o>];</span>
</span></span><span class=line><span class=cl>      <span class=k>this</span><span class=o>.</span><span class=na>comparator</span> <span class=o>=</span> <span class=n>comparator</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>PriorityQueue å¯ç”±ä»¥ä¸‹ä¸‰ç§æ„é€ æ–¹æ³•åˆ›å»ºï¼š</p><ul><li>è°ƒç”¨é»˜è®¤çš„æ„é€ æ–¹æ³•æ—¶ï¼Œä½¿ç”¨é»˜è®¤çš„åˆå§‹å®¹é‡ï¼ˆDEFAULT_INITIAL_CAPACITY=11ï¼‰ï¼Œå¹¶æ ¹æ®å…¶è‡ªç„¶é¡ºåºæ¥æ’åºå…¶å…ƒç´ ï¼ˆä½¿ç”¨åŠ å…¥å…¶ä¸­çš„é›†åˆå…ƒç´ å®ç°çš„ Comparableï¼‰ã€‚</li><li>ä½¿ç”¨æŒ‡å®šçš„åˆå§‹å®¹é‡ï¼Œå¹¶æ ¹æ®å…¶è‡ªç„¶é¡ºåºæ¥æ’åºå…¶å…ƒç´ ï¼ˆä½¿ç”¨åŠ å…¥å…¶ä¸­çš„é›†åˆå…ƒç´ å®ç°çš„ Comparableï¼‰ã€‚</li><li>ä½¿ç”¨æŒ‡å®šçš„åˆå§‹å®¹é‡ï¼Œå¹¶æ ¹æ®æŒ‡å®šçš„æ¯”è¾ƒå™¨ comparator æ¥æ’åºå…¶å…ƒç´ ã€‚</li></ul><p>ä»ç¬¬ä¸‰ä¸ªæ„é€ æ–¹æ³•å¯ä»¥çœ‹å‡ºï¼Œå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŠ¨æ€æ•°ç»„ã€‚å½“æ·»åŠ å…ƒç´ åˆ°é›†åˆæ—¶ï¼Œä¼šå…ˆæ£€æŸ¥æ•°ç»„æ˜¯å¦è¿˜æœ‰ä½™é‡ï¼Œæœ‰ä½™é‡åˆ™æŠŠæ–°å…ƒç´ åŠ å…¥é›†åˆï¼Œæ²¡ä½™é‡åˆ™è°ƒç”¨ grow() æ–¹æ³•å¢åŠ å®¹é‡ï¼Œç„¶åè°ƒç”¨ siftUp å°†æ–°åŠ å…¥çš„å…ƒç´ æ’åºæ’å…¥å¯¹åº”ä½ç½®ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>offer</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>e</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=n>NullPointerException</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>modCount</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>size</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>i</span> <span class=o>&gt;=</span> <span class=n>queue</span><span class=o>.</span><span class=na>length</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>grow</span><span class=o>(</span><span class=n>i</span> <span class=o>+</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>size</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>i</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>queue</span><span class=o>[</span><span class=n>0</span><span class=o>]</span> <span class=o>=</span> <span class=n>e</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=n>siftUp</span><span class=o>(</span><span class=n>i</span><span class=o>,</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¦æ³¨æ„ï¼š</p><ol><li>PriorityQueue ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹ä¸­çš„ä»»æ„çº¿ç¨‹ä»ç»“æ„ä¸Šä¿®æ”¹äº†åˆ—è¡¨ï¼Œ åˆ™è¿™äº›çº¿ç¨‹ä¸åº”åŒæ—¶è®¿é—® PriorityQueue å®ä¾‹ï¼Œè¿™æ—¶è¯·ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„ PriorityBlockingQueue ç±»ã€‚</li><li>ä¸å…è®¸æ’å…¥ null å…ƒç´ ã€‚</li><li>PriorityQueue å®ç°æ’å…¥æ–¹æ³•ï¼ˆofferã€pollã€remove() å’Œ add æ–¹æ³•ï¼‰ çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(log(n)) ï¼›å®ç° remove(Object) å’Œ contains(Object) æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ï¼›å®ç°æ£€ç´¢æ–¹æ³•ï¼ˆpeekã€element å’Œ sizeï¼‰çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚æ‰€ä»¥åœ¨éå†æ—¶ï¼Œè‹¥ä¸éœ€è¦åˆ é™¤å…ƒç´ ï¼Œåˆ™ä»¥ peek çš„æ–¹å¼éå†æ¯ä¸ªå…ƒç´ ã€‚</li><li>æ–¹æ³• iterator() ä¸­æä¾›çš„è¿­ä»£å™¨å¹¶ä¸ä¿è¯ä»¥æœ‰åºçš„æ–¹å¼éå†ä¼˜ PriorityQueue ä¸­çš„å…ƒç´ ã€‚</li></ol><a href=#list-æ¥å£><h2 id=list-æ¥å£><span class=hanchor arialabel=Anchor># </span>List æ¥å£</h2></a><p>List é›†åˆä»£è¡¨ä¸€ä¸ª<strong>å…ƒç´ æœ‰åºã€å¯é‡å¤</strong>çš„é›†åˆï¼Œé›†åˆä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ã€‚List é›†åˆå…è®¸ä½¿ç”¨é‡å¤å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•æ¥è®¿é—®æŒ‡å®šä½ç½®çš„é›†åˆå…ƒç´  ã€‚List é›†åˆé»˜è®¤æŒ‰å…ƒç´ çš„æ·»åŠ é¡ºåºè®¾ç½®å…ƒç´ çš„ç´¢å¼•ï¼Œä¾‹å¦‚ç¬¬ä¸€ä¸ªæ·»åŠ çš„å…ƒç´ ç´¢å¼•ä¸º 0ï¼Œç¬¬äºŒä¸ªæ·»åŠ çš„å…ƒç´ ç´¢å¼•ä¸º 1&mldr;&mldr;</p><p>List ä½œä¸º Collection æ¥å£çš„å­æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨ Collection æ¥å£é‡Œçš„å…¨éƒ¨æ–¹æ³•ã€‚è€Œä¸”ç”±äº List æ˜¯æœ‰åºé›†åˆï¼Œå› æ­¤ List é›†åˆé‡Œå¢åŠ äº†ä¸€äº›æ ¹æ®ç´¢å¼•æ¥æ“ä½œé›†åˆå…ƒç´ çš„æ–¹æ³•ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>Collection</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>isEmpty</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Iterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Object</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=n>T</span><span class=o>[]</span> <span class=nf>toArray</span><span class=o>(</span><span class=n>T</span><span class=o>[]</span> <span class=n>a</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>containsAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>addAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>addAll</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>,</span> <span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>removeAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>retainAll</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?&gt;</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * æ ¹æ® operator æŒ‡å®šçš„è®¡ç®—è§„åˆ™é‡æ–°è®¾ç½® List é›†åˆçš„æ‰€æœ‰å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>void</span> <span class=nf>replaceAll</span><span class=o>(</span><span class=n>UnaryOperator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>operator</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>operator</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=kd>final</span> <span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>li</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>listIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>li</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>li</span><span class=o>.</span><span class=na>set</span><span class=o>(</span><span class=n>operator</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>li</span><span class=o>.</span><span class=na>next</span><span class=o>()));</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * æ ¹æ®Comparatorå‚æ•°å¯¹Listé›†åˆçš„å…ƒç´ æ’åº
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>void</span> <span class=nf>sort</span><span class=o>(</span><span class=n>Comparator</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Object</span><span class=o>[]</span> <span class=n>a</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>toArray</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>a</span><span class=o>,</span> <span class=o>(</span><span class=n>Comparator</span><span class=o>)</span> <span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>i</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>listIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Object</span> <span class=n>e</span> <span class=o>:</span> <span class=n>a</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>i</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=n>i</span><span class=o>.</span><span class=na>set</span><span class=o>((</span><span class=n>E</span><span class=o>)</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>clear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ ¹æ®ä¸‹æ ‡è·å–å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>E</span> <span class=nf>get</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Â æ›¿æ¢æŒ‡å®šä¸‹æ ‡ä½ç½®çš„å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>E</span> <span class=nf>set</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>,</span> <span class=n>E</span> <span class=n>element</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Â åœ¨æŒ‡å®šä¸‹æ ‡ä½ç½®æ’å…¥å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=nf>add</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>,</span> <span class=n>E</span> <span class=n>element</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Â æ ¹æ®ä¸‹æ ‡åˆ é™¤å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>E</span> <span class=nf>remove</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>//Â è·å–å…ƒç´ ä¸‹æ ‡ï¼Œä¸å­˜åœ¨åˆ™è¿”å› -1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// è·å–ä¸å…ƒç´ æœ€åä¸€ä¸ªä¸‹æ ‡ï¼Œï¼Œä¸å­˜åœ¨åˆ™è¿”å› -1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=nf>lastIndexOf</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>listIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>ListIterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>listIterator</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>subList</span><span class=o>(</span><span class=kt>int</span> <span class=n>fromIndex</span><span class=o>,</span> <span class=kt>int</span> <span class=n>toIndex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>Spliterator</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>spliterator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Spliterators</span><span class=o>.</span><span class=na>spliterator</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=n>Spliterator</span><span class=o>.</span><span class=na>ORDERED</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹å‡ºï¼Œç»è¿‡æ‰©å±•ä¹‹åï¼ŒList ç›¸æ¯”äº Collection å¤šäº†â€œé¡ºåºâ€çš„æ¦‚å¿µï¼Œå¹¶ä¸”æ”¯æŒæ ¹æ®ä¸‹è¡¨å¯¹é›†åˆè¿›è¡Œæ“ä½œã€‚</p><p>isEmpty()ã€contains() ç­‰æ–¹æ³•é‡æ–°å£°æ˜æ˜¯ä¸ºäº†ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹æ–‡æ¡£ã€‚æ¯”å¦‚åœ¨ java doc æ–‡æ¡£é‡Œï¼Œåœ¨ List æ¥å£é‡Œä¹Ÿèƒ½çœ‹åˆ° Collecion å£°æ˜çš„ç›¸å…³æ¥å£ã€‚</p><p>æ­¤å¤–ï¼ŒJava 8 ä¸º List æ¥å£æ·»åŠ äº†å¦‚ä¸‹ä¸¤ä¸ªé»˜è®¤æ–¹æ³•ï¼š</p><ul><li><strong>void replaceAll(UnaryOperator operator)ï¼š</strong>æ ¹æ® operator æŒ‡å®šçš„è®¡ç®—è§„åˆ™é‡æ–°è®¾ç½® List é›†åˆçš„æ‰€æœ‰å…ƒç´ ã€‚</li><li><strong>void sort(Comparator c)ï¼š</strong>æ ¹æ® Comparator å‚æ•°å¯¹ List é›†åˆçš„å…ƒç´ æ’åºã€‚</li></ul><p>ListIterator æ¥å£åœ¨ Iterator æ¥å£åŸºç¡€ä¸Šå¢åŠ äº†å¦‚ä¸‹æ–¹æ³•ï¼š</p><ul><li><strong>boolean hasPrevious()ï¼š</strong> å¦‚æœä»¥é€†å‘éå†åˆ—è¡¨ã€‚å¦‚æœè¿­ä»£å™¨æœ‰ä¸Šä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å› trueã€‚</li><li><strong>Object previous()ï¼š</strong>è¿”å›è¿­ä»£å™¨çš„å‰ä¸€ä¸ªå…ƒç´ ã€‚</li><li><strong>void add(Object o)ï¼š</strong>å°†æŒ‡å®šçš„å…ƒç´ æ’å…¥åˆ—è¡¨ï¼ˆå¯é€‰æ“ä½œï¼‰ã€‚</li></ul><p>ä¸ Iterator ç›¸æ¯”ï¼ŒListIterator å¢åŠ äº†å‰å‘è¿­ä»£çš„åŠŸèƒ½ï¼Œè¿˜å¯ä»¥é€šè¿‡ add() æ–¹æ³•å‘ List é›†åˆä¸­æ·»åŠ å…ƒç´ ã€‚</p><a href=#arraylist-ç±»><h3 id=arraylist-ç±»><span class=hanchor arialabel=Anchor># </span>ArrayList ç±»</h3></a><p>ArrayList ä½œä¸º List ç±»çš„å…¸å‹å®ç°ï¼Œå®Œå…¨æ”¯æŒä¹‹å‰ä»‹ç»çš„ List æ¥å£çš„å…¨éƒ¨åŠŸèƒ½ã€‚å®ƒçš„æˆå‘˜å˜é‡å’Œæ„é€ æ–¹æ³•å£°æ˜å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ArrayList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>AbstractList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=kd>implements</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;,</span> <span class=n>RandomAccess</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * é»˜è®¤åˆå§‹å®¹é‡å¤§å°
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>DEFAULT_CAPACITY</span> <span class=o>=</span> <span class=n>10</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>EMPTY_ELEMENTDATA</span> <span class=o>=</span> <span class=o>{};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span> <span class=o>=</span> <span class=o>{};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>transient</span> <span class=n>Object</span><span class=o>[]</span> <span class=n>elementData</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>size</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨åˆå§‹å®¹é‡10æ„é€ ä¸€ä¸ªç©ºåˆ—è¡¨(æ— å‚æ•°æ„é€ )
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>ArrayList</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>elementData</span> <span class=o>=</span> <span class=n>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ï¼ˆç”¨æˆ·è‡ªå·±æŒ‡å®šå®¹é‡ï¼‰
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>ArrayList</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>initialCapacity</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span><span class=c1>//åˆå§‹å®¹é‡å¤§äº0
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>//åˆ›å»º initialCapacity å¤§å°çš„æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=o>.</span><span class=na>elementData</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Object</span><span class=o>[</span><span class=n>initialCapacity</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>initialCapacity</span> <span class=o>==</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span><span class=c1>//åˆå§‹å®¹é‡ç­‰äº0
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// åˆ›å»ºç©ºæ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=o>.</span><span class=na>elementData</span> <span class=o>=</span> <span class=n>EMPTY_ELEMENTDATA</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span><span class=c1>// åˆå§‹å®¹é‡å°äº 0ï¼ŒæŠ›å‡ºå¼‚å¸¸
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>throw</span> <span class=k>new</span> <span class=n>IllegalArgumentException</span><span class=o>(</span><span class=s>&#34;Illegal Capacity: &#34;</span><span class=o>+</span>
</span></span><span class=line><span class=cl>                                               <span class=n>initialCapacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>    * æ„é€ åŒ…å«æŒ‡å®š collection å…ƒç´ çš„åˆ—è¡¨ï¼Œè¿™äº›å…ƒç´ åˆ©ç”¨è¯¥é›†åˆçš„è¿­ä»£å™¨æŒ‰é¡ºåºè¿”å›
</span></span></span><span class=line><span class=cl><span class=cm>    * å¦‚æœæŒ‡å®šçš„é›†åˆä¸º nullï¼Œthrows NullPointerExceptionã€‚
</span></span></span><span class=line><span class=cl><span class=cm>    */</span>
</span></span><span class=line><span class=cl>     <span class=kd>public</span> <span class=nf>ArrayList</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>elementData</span> <span class=o>=</span> <span class=n>c</span><span class=o>.</span><span class=na>toArray</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>((</span><span class=n>size</span> <span class=o>=</span> <span class=n>elementData</span><span class=o>.</span><span class=na>length</span><span class=o>)</span> <span class=o>!=</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// c.toArray might (incorrectly) not return Object[] (see 6260652)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>elementData</span><span class=o>.</span><span class=na>getClass</span><span class=o>()</span> <span class=o>!=</span> <span class=n>Object</span><span class=o>[].</span><span class=na>class</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=n>elementData</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>elementData</span><span class=o>,</span> <span class=n>size</span><span class=o>,</span> <span class=n>Object</span><span class=o>[].</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// replace with empty array.
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>this</span><span class=o>.</span><span class=na>elementData</span> <span class=o>=</span> <span class=n>EMPTY_ELEMENTDATA</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ArrayList æ˜¯åŸºäºæ•°ç»„å®ç°çš„ List ç±»ï¼Œæ‰€ä»¥ ArrayList ç±»å°è£…äº†ä¸€ä¸ªåŠ¨æ€çš„ã€å…è®¸å†åˆ†é…çš„ Object[] æ•°ç»„ã€‚ArrayList å¯¹è±¡ä½¿ç”¨ initalCapacity å‚æ•°æ¥è®¾ç½®è¯¥æ•°ç»„çš„é•¿åº¦ï¼Œå½“å‘ ArrayList ä¸­æ·»åŠ å…ƒç´ è¶…è¿‡äº†è¯¥æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œå®ƒä»¬çš„ initalCapacity ä¼šè‡ªåŠ¨å¢åŠ ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡é˜…è¯» JDK 8 ArrayList æºç æ¥äº†è§£è¿™äº›å†…å®¹ã€‚</p><a href=#æ‰©å®¹æœºåˆ¶><h4 id=æ‰©å®¹æœºåˆ¶><span class=hanchor arialabel=Anchor># </span>æ‰©å®¹æœºåˆ¶</h4></a><p>ä»¥æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º ArrayList æ—¶ï¼Œå®é™…ä¸Šåˆå§‹åŒ–èµ‹å€¼çš„æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚å½“çœŸæ­£å¯¹æ•°ç»„è¿›è¡Œæ·»åŠ å…ƒç´ æ“ä½œæ—¶ï¼Œæ‰çœŸæ­£åˆ†é…å®¹é‡ã€‚å³å‘æ•°ç»„ä¸­æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º 10ã€‚Â </p><p>JDK 7 new æ— å‚æ„é€ çš„ ArrayList å¯¹è±¡æ—¶ï¼Œç›´æ¥åˆ›å»ºäº†é•¿åº¦æ˜¯ 10 çš„ Object[] æ•°ç»„ elementData ã€‚å¹¶ä¸” JDK 7 ä¸­çš„ ArrayList çš„å¯¹è±¡çš„åˆ›å»ºç±»ä¼¼äºå•ä¾‹çš„é¥¿æ±‰å¼ï¼Œè€Œ JDK 8 ä¸­çš„ ArrayList çš„å¯¹è±¡çš„åˆ›å»ºç±»ä¼¼äºå•ä¾‹çš„æ‡’æ±‰å¼ã€‚</p><p>æ·»åŠ å…ƒç´ æ—¶ï¼Œé¦–å…ˆè°ƒç”¨ add æ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³•
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ensureCapacityInternal</span><span class=o>(</span><span class=n>size</span> <span class=o>+</span> <span class=n>1</span><span class=o>);</span>  <span class=c1>// Increments modCount!!
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>elementData</span><span class=o>[</span><span class=n>size</span><span class=o>++]</span> <span class=o>=</span> <span class=n>e</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å…ˆè°ƒç”¨äº†ä¸€ä¸ª ensureCapacityInternal() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨æ¥ç¡®ä¿æ•°ç»„ä¸­æ˜¯å¦è¿˜æœ‰è¶³å¤Ÿå®¹é‡ã€‚</p><p><strong>æ³¨æ„Â ï¼šJDK 11 ç§»é™¤äº†Â ensureCapacityInternal()Â å’ŒÂ ensureExplicitCapacity()Â æ–¹æ³•</strong></p><p>ç»è¿‡ä¸€ç³»åˆ—æ–¹æ³•ï¼Œæœ€åæœ‰ä¸ªåˆ¤æ–­ï¼šå¦‚æœå‰©ä½™å®¹é‡è¶³å¤Ÿå­˜æ”¾è¿™ä¸ªæ•°æ®ï¼Œåˆ™è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œå¦‚æœä¸å¤Ÿï¼Œåˆ™éœ€è¦æ‰§è¡Œä¸€ä¸ªé‡è¦çš„æ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>MAX_ARRAY_SIZE</span> <span class=o>=</span> <span class=n>Integer</span><span class=o>.</span><span class=na>MAX_VALUE</span> <span class=o>-</span> <span class=n>8</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * ArrayList æ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=kt>void</span> <span class=nf>grow</span><span class=o>(</span><span class=kt>int</span> <span class=n>minCapacity</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=c1>// oldCapacity ä¸ºæ—§å®¹é‡ï¼ŒnewCapacity ä¸ºæ–°å®¹é‡
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=kt>int</span> <span class=n>oldCapacity</span> <span class=o>=</span> <span class=n>elementData</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>   <span class=c1>//å°† oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äº oldCapacity / 2ï¼Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=kt>int</span> <span class=n>newCapacity</span> <span class=o>=</span> <span class=n>oldCapacity</span> <span class=o>+</span> <span class=o>(</span><span class=n>oldCapacity</span> <span class=o>&gt;&gt;</span> <span class=n>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>   <span class=c1>//ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=k>if</span> <span class=o>(</span><span class=n>newCapacity</span> <span class=o>-</span> <span class=n>minCapacity</span> <span class=o>&lt;</span> <span class=n>0</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=n>newCapacity</span> <span class=o>=</span> <span class=n>minCapacity</span><span class=o>;</span>
</span></span><span class=line><span class=cl>   <span class=c1>// å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZEï¼Œè¿›å…¥(æ‰§è¡Œ) hugeCapacity() æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=c1>//å¦‚æœ minCapacityå¤§ äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ Integer.MAX_VALUE - 8ã€‚
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=k>if</span> <span class=o>(</span><span class=n>newCapacity</span> <span class=o>-</span> <span class=n>MAX_ARRAY_SIZE</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      <span class=n>newCapacity</span> <span class=o>=</span> <span class=n>hugeCapacity</span><span class=o>(</span><span class=n>minCapacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl>   <span class=c1>// minCapacity is usually close to size, so this is a win:
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=n>elementData</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>elementData</span><span class=o>,</span> <span class=n>newCapacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p><code>int newCapacity = oldCapacity + (oldCapacity >> 1)</code>ï¼Œæ‰€ä»¥ ArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€å·¦å³ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œå¦åˆ™æ˜¯ 1.5 å€å·¦å³ï¼‰ã€‚</p><p>ç”±æ­¤å¯è§ï¼ŒArrayList æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè¿›è¡ŒåŠ¨æ€æ‰©å±•çš„æ•°ç»„ã€‚</p><a href=#systemarraycopyå’Œarrayscopyof-æ–¹æ³•><h4 id=systemarraycopyå’Œarrayscopyof-æ–¹æ³•><span class=hanchor arialabel=Anchor># </span>System.arraycopy()Â å’ŒÂ Arrays.copyOf() æ–¹æ³•</h4></a><p>Arrays.copyOf() å†…éƒ¨è°ƒç”¨äº†Â System.arraycopy()Â æ–¹æ³•ï¼Œarraycopy() æ–¹æ³•ç”± native å±‚å®ç°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>int</span><span class=o>[]</span> <span class=nf>copyOf</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>original</span><span class=o>,</span> <span class=kt>int</span> <span class=n>newLength</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>   <span class=c1>// ç”³è¯·ä¸€ä¸ªæ–°çš„æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=kt>int</span><span class=o>[]</span> <span class=n>copy</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>int</span><span class=o>[</span><span class=n>newLength</span><span class=o>];</span>
</span></span><span class=line><span class=cl>   <span class=c1>// è°ƒç”¨System.arraycopyï¼Œå°†æºæ•°ç»„ä¸­çš„æ•°æ®è¿›è¡Œæ‹·è´ï¼Œå¹¶è¿”å›æ–°çš„æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=n>System</span><span class=o>.</span><span class=na>arraycopy</span><span class=o>(</span><span class=n>original</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span> <span class=n>copy</span><span class=o>,</span> <span class=n>0</span><span class=o>,</span>
</span></span><span class=line><span class=cl>           <span class=n>Math</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>original</span><span class=o>.</span><span class=na>length</span><span class=o>,</span> <span class=n>newLength</span><span class=o>));</span>
</span></span><span class=line><span class=cl>   <span class=k>return</span> <span class=n>copy</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * @param src æºæ•°ç»„
</span></span></span><span class=line><span class=cl><span class=cm> * @param srcPos æºæ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®
</span></span></span><span class=line><span class=cl><span class=cm> * @param dest ç›®æ ‡æ•°ç»„
</span></span></span><span class=line><span class=cl><span class=cm> * @param destPos ç›®æ ‡æ•°ç»„ä¸­çš„èµ·å§‹ä½ç½®
</span></span></span><span class=line><span class=cl><span class=cm> * @param length è¦å¤åˆ¶çš„æ•°ç»„å…ƒç´ çš„æ•°é‡
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kd>native</span> <span class=kt>void</span> <span class=nf>arraycopy</span><span class=o>(</span><span class=n>Object</span> <span class=n>src</span><span class=o>,</span>  <span class=kt>int</span>  <span class=n>srcPos</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                                    <span class=n>Object</span> <span class=n>dest</span><span class=o>,</span> <span class=kt>int</span> <span class=n>destPos</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                                    <span class=kt>int</span> <span class=n>length</span><span class=o>);</span>
</span></span></code></pre></td></tr></table></div></div><p>ensureCapacity() å’Œ trimToSize() æ–¹æ³•</p><ul><li><strong>void ensureCapacity(int minCapacity): </strong>å¦‚æœ‰å¿…è¦ï¼Œå¢åŠ æ­¤ ArrayList å®ä¾‹çš„å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘èƒ½å¤Ÿå®¹çº³æœ€å°å®¹é‡å‚æ•°æ‰€æŒ‡å®šçš„å…ƒç´ æ•°ã€‚<strong>åœ¨å¢åŠ å¤§é‡æ•°æ®ä¹‹å‰ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¯ä»¥å‡å°‘æ‰©å®¹æ¬¡æ•°ã€‚</strong></li><li><strong>void trimToSize(): </strong>å°†æ­¤ ArrayList å®ä¾‹çš„å®¹é‡è°ƒæ•´ä¸ºåˆ—è¡¨çš„å½“å‰å¤§å°ã€‚</li></ul><a href=#transient-çš„ä½œç”¨><h4 id=transient-çš„ä½œç”¨><span class=hanchor arialabel=Anchor># </span>transient çš„ä½œç”¨</h4></a><p>ä»æ„é€ æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå®é™…å­˜æ”¾é›†åˆå…ƒç´ çš„æ•°ç»„å£°æ˜æ—¶æ—¶è¢« transient æ‰€ä¿®é¥°çš„ï¼š</p><p><code>transient Object[] elementData;</code></p><p>å½“ä¸€ä¸ªå¯¹è±¡è¢«åºè¡ŒåŒ–çš„æ—¶å€™ï¼Œtransient ä¿®é¥°çš„å˜é‡çš„å€¼æ˜¯ä¸åŒ…æ‹¬åœ¨åºè¡ŒåŒ–çš„è¡¨ç¤ºä¸­çš„ã€‚ä½†æ˜¯ ArrayList åˆæ˜¯å¯åºè¡ŒåŒ–çš„ç±»ï¼ŒelementData æ˜¯ ArrayList å…·ä½“å­˜æ”¾å…ƒç´ çš„æˆå‘˜ï¼Œç”¨ transient æ¥ä¿®é¥° elementDataï¼Œå²‚ä¸æ˜¯ååºåˆ—åŒ–åçš„ ArrayList ä¸¢å¤±äº†åŸå…ˆçš„å…ƒç´ ï¼Ÿ</p><p>æ¥çœ‹ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kt>void</span> <span class=nf>writeObject</span><span class=o>(</span><span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>ObjectOutputStream</span> <span class=n>s</span><span class=o>)</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>throws</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>IOException</span><span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=c1>// Write out element count, and any hidden stuff
</span></span></span><span class=line><span class=cl><span class=c1></span>Â  Â  <span class=kt>int</span> <span class=n>expectedModCount</span> <span class=o>=</span> <span class=n>modCount</span><span class=o>;</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=n>s</span><span class=o>.</span><span class=na>defaultWriteObject</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=c1>// Write out size as capacity for behavioural compatibility with clone()
</span></span></span><span class=line><span class=cl><span class=c1></span>Â  Â  <span class=n>s</span><span class=o>.</span><span class=na>writeInt</span><span class=o>(</span><span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=c1>// Write out all elements in the proper order.
</span></span></span><span class=line><span class=cl><span class=c1></span>Â  Â  <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=n>0</span><span class=o>;</span> <span class=n>i</span><span class=o>&lt;</span><span class=n>size</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>s</span><span class=o>.</span><span class=na>writeObject</span><span class=o>(</span><span class=n>elementData</span><span class=o>[</span><span class=n>i</span><span class=o>]);</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=k>if</span> <span class=o>(</span><span class=n>modCount</span> <span class=o>!=</span> <span class=n>expectedModCount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=k>throw</span> <span class=k>new</span> <span class=n>ConcurrentModificationException</span><span class=o>();</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>Â * Reconstitute the &lt;tt&gt;ArrayList&lt;/tt&gt; instance from a stream (that is,
</span></span></span><span class=line><span class=cl><span class=cm>Â * deserialize it).
</span></span></span><span class=line><span class=cl><span class=cm>Â */</span>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=kt>void</span> <span class=nf>readObject</span><span class=o>(</span><span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>ObjectInputStream</span> <span class=n>s</span><span class=o>)</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=kd>throws</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>IOException</span><span class=o>,</span> <span class=n>ClassNotFoundException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=n>elementData</span> <span class=o>=</span> <span class=n>EMPTY_ELEMENTDATA</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=c1>// Read in size, and any hidden stuff
</span></span></span><span class=line><span class=cl><span class=c1></span>Â  Â  <span class=n>s</span><span class=o>.</span><span class=na>defaultReadObject</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  <span class=c1>// Read in capacity
</span></span></span><span class=line><span class=cl><span class=c1></span>Â  Â  <span class=n>s</span><span class=o>.</span><span class=na>readInt</span><span class=o>();</span> <span class=c1>// ignored
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>Â  Â  <span class=k>if</span> <span class=o>(</span><span class=n>size</span> <span class=o>&gt;</span> <span class=n>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=c1>// be like clone(), allocate array based upon size not capacity
</span></span></span><span class=line><span class=cl><span class=c1></span>Â  Â  Â  Â  <span class=kt>int</span> <span class=n>capacity</span> <span class=o>=</span> <span class=n>calculateCapacity</span><span class=o>(</span><span class=n>elementData</span><span class=o>,</span> <span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>SharedSecrets</span><span class=o>.</span><span class=na>getJavaOISAccess</span><span class=o>().</span><span class=na>checkArray</span><span class=o>(</span><span class=n>s</span><span class=o>,</span> <span class=n>Object</span><span class=o>[].</span><span class=na>class</span><span class=o>,</span> <span class=n>capacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>ensureCapacityInternal</span><span class=o>(</span><span class=n>size</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=n>Object</span><span class=o>[]</span> <span class=n>a</span> <span class=o>=</span> <span class=n>elementData</span><span class=o>;</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=c1>// Read in all elements in the proper order.
</span></span></span><span class=line><span class=cl><span class=c1></span>Â  Â  Â  Â  <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=n>0</span><span class=o>;</span> <span class=n>i</span><span class=o>&lt;</span><span class=n>size</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  Â  Â  <span class=n>a</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=na>readObject</span><span class=o>();</span>
</span></span><span class=line><span class=cl>Â  Â  Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl>Â  Â  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=n>ç”±äº</span> <span class=n>elementData</span> <span class=n>çš„æ‰©å®¹æœºåˆ¶</span><span class=err>ï¼Œ</span><span class=n>æ•°ç»„ä¸­å¯èƒ½æœ‰ç©ºå…ƒç´ </span><span class=err>ã€‚</span><span class=n>å› æ­¤</span><span class=err>ï¼Œ</span><span class=n>æ¯æ¬¡åºåˆ—åŒ–çš„æ—¶å€™è°ƒç”¨</span> <span class=nf>writeObject</span><span class=o>()</span> <span class=n>æ–¹æ³•</span><span class=err>ï¼Œ</span><span class=n>è¿›è€Œè°ƒç”¨</span> <span class=nf>defaultWriteObject</span><span class=o>()</span> <span class=n>æ–¹æ³•å¿½ç•¥</span> <span class=n>elementData</span> <span class=n>å…ˆåºåˆ—åŒ–</span> <span class=n>ArrayList</span> <span class=n>ä¸­çš„é</span> <span class=kd>transient</span> <span class=n>å…ƒç´ </span><span class=err>ï¼Œ</span><span class=n>ç„¶åå†é€šè¿‡éå†</span> <span class=n>elementData</span> <span class=n>åªåºåˆ—åŒ–é‚£äº›æœ‰çš„å…ƒç´ </span><span class=err>ã€‚</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ ·ä¸€æ¥ï¼Œæ—¢<strong>åŠ å¿«äº†åºåˆ—åŒ–çš„é€Ÿåº¦ï¼Œåˆå‡å°äº†åºåˆ—åŒ–ä¹‹åçš„æ–‡ä»¶å¤§å° ã€‚</strong></p><p>ååºåˆ—åŒ–æ—¶è°ƒç”¨ readObjectï¼Œä» ObjectInputStream è·å– size å’Œ elementï¼Œå†æ¢å¤åˆ° elementDataã€‚</p><p>//todo</p><a href=#éå†æ–¹å¼><h4 id=éå†æ–¹å¼><span class=hanchor arialabel=Anchor># </span>éå†æ–¹å¼</h4></a><p>ArrayList æ”¯æŒ 3 ç§éå†æ–¹å¼</p><p><strong>ç¬¬ä¸€ç§ï¼Œé€šè¿‡è¿­ä»£å™¨éå†ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Integer</span> <span class=n>value</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=n>Iterator</span> <span class=n>iter</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>iterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=o>(</span><span class=n>iter</span><span class=o>.</span><span class=na>hasNext</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>ter</span><span class=o>.</span><span class=na>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>ç¬¬äºŒç§ï¼Œéšæœºè®¿é—®ï¼Œé€šè¿‡ç´¢å¼•å€¼å»éå†ï¼š</strong></p><p>ç”±äº ArrayList å®ç°äº† RandomAccess æ¥å£ï¼Œå®ƒæ”¯æŒé€šè¿‡ç´¢å¼•å€¼å»éšæœºè®¿é—®å…ƒç´ ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Integer</span> <span class=n>value</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>list</span><span class=o>.</span><span class=na>size</span><span class=o>();</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>        
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>ç¬¬ä¸‰ç§ï¼Œfor å¾ªç¯éå†ï¼š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Integer</span> <span class=n>value</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=n>Integer</span> <span class=n>item</span> <span class=o>:</span> <span class=n>list</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span> <span class=o>=</span> <span class=n>item</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>éå† ArrayList æ—¶ï¼Œä½¿ç”¨éšæœºè®¿é—®(é€šè¿‡ç´¢å¼•åºå·è®¿é—®)æ•ˆç‡æœ€é«˜ï¼Œè€Œä½¿ç”¨è¿­ä»£å™¨çš„æ•ˆç‡æœ€ä½ã€‚</strong></p><p><strong>//todo</strong></p><a href=#vector-ç±»><h3 id=vector-ç±»><span class=hanchor arialabel=Anchor># </span>Vector ç±»</h3></a><p>Vector å’Œ ArrayList çš„å®ç°åŸºæœ¬ç±»ä¼¼ï¼Œä»¥ remove æ–¹æ³•ä¸ºä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span>Â <span class=kd>synchronized</span>Â <span class=n>E</span>Â <span class=nf>remove</span><span class=o>(</span><span class=kt>int</span>Â <span class=n>index</span><span class=o>)</span>Â <span class=o>{</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=n>modCount</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=k>if</span>Â <span class=o>(</span><span class=n>index</span> <span class=o>&gt;=</span> <span class=n>elementCount</span><span class=o>)</span>
</span></span><span class=line><span class=cl>Â Â Â Â Â Â Â Â <span class=k>throw</span>Â <span class=k>new</span>Â <span class=n>ArrayIndexOutOfBoundsException</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=n>E</span> <span class=n>oldValue</span> <span class=o>=</span> <span class=n>elementData</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=kt>int</span>Â <span class=n>numMoved</span> <span class=o>=</span> <span class=n>elementCount</span> <span class=o>-</span> <span class=n>index</span> <span class=o>-</span>Â <span class=n>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=k>if</span>Â <span class=o>(</span><span class=n>numMoved</span> <span class=o>&gt;</span>Â <span class=n>0</span><span class=o>)</span>
</span></span><span class=line><span class=cl>Â Â Â Â Â Â   <span class=c1>//å¤åˆ¶æ•°ç»„ï¼Œå‡è®¾æ•°ç»„ç§»é™¤äº†ä¸­é—´æŸå…ƒç´ ï¼Œåè¾¹æœ‰æ•ˆå€¼å‰ç§»1ä½
</span></span></span><span class=line><span class=cl><span class=c1></span>Â Â Â Â Â Â Â Â <span class=n>System</span><span class=o>.</span><span class=na>arraycopy</span><span class=o>(</span><span class=n>elementData</span><span class=o>,</span> <span class=n>index</span><span class=o>+</span><span class=n>1</span><span class=o>,</span> <span class=n>elementData</span><span class=o>,</span> <span class=n>index</span><span class=o>,</span>
</span></span><span class=line><span class=cl>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class=n>numMoved</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=n>elementData</span><span class=o>[--</span><span class=n>elementCount</span><span class=o>]</span> <span class=o>=</span>Â <span class=kc>null</span><span class=o>;</span>Â <span class=c1>// Let gc do its work
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=k>return</span>Â <span class=n>oldValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å®ƒçš„å…³é”®æ–¹æ³•éƒ½åŠ ä¸Šäº† synchronized å…³é”®å­—ï¼Œæ‰€ä»¥å®ƒæ˜¯<strong>çº¿ç¨‹å®‰å…¨</strong>çš„ï¼Œå¹¶ä¸”ä¹Ÿå› æ­¤<strong>é™ä½äº†æ€§èƒ½</strong>ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒçš„æ‰©å®¹æœºåˆ¶ä¹Ÿä¸ ArrayList æœ‰æ‰€ä¸åŒï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span>Â <span class=kt>void</span>Â <span class=nf>grow</span><span class=o>(</span><span class=kt>int</span>Â <span class=n>minCapacity</span><span class=o>)</span>Â <span class=o>{</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=c1>// overflow-conscious code
</span></span></span><span class=line><span class=cl><span class=c1></span>Â Â Â Â <span class=kt>int</span>Â <span class=n>oldCapacity</span> <span class=o>=</span> <span class=n>elementData</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=c1>//æ‰©å®¹å¤§å°
</span></span></span><span class=line><span class=cl><span class=c1></span>Â Â Â Â <span class=kt>int</span>Â <span class=n>newCapacity</span> <span class=o>=</span> <span class=n>oldCapacity</span> <span class=o>+</span> <span class=o>((</span><span class=n>capacityIncrement</span> <span class=o>&gt;</span>Â <span class=n>0</span><span class=o>)</span> <span class=o>?</span>
</span></span><span class=line><span class=cl>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class=n>capacityIncrement</span> <span class=o>:</span> <span class=n>oldCapacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=k>if</span>Â <span class=o>(</span><span class=n>newCapacity</span> <span class=o>-</span> <span class=n>minCapacity</span> <span class=o>&lt;</span>Â <span class=n>0</span><span class=o>)</span>
</span></span><span class=line><span class=cl>Â Â Â Â Â Â Â Â <span class=n>newCapacity</span> <span class=o>=</span> <span class=n>minCapacity</span><span class=o>;</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=k>if</span>Â <span class=o>(</span><span class=n>newCapacity</span> <span class=o>-</span> <span class=n>MAX_ARRAY_SIZE</span> <span class=o>&gt;</span>Â <span class=n>0</span><span class=o>)</span>
</span></span><span class=line><span class=cl>Â Â Â Â Â Â Â Â <span class=n>newCapacity</span> <span class=o>=</span> <span class=n>hugeCapacity</span><span class=o>(</span><span class=n>minCapacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl>Â Â Â Â <span class=n>elementData</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>elementData</span><span class=o>,</span> <span class=n>newCapacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å½“æ„é€ æ²¡æœ‰è®¾ç½® capacityIncrement æ—¶ï¼Œä¸€æ¬¡æ‰©å®¹æ•°ç»„å˜æˆåŸæ¥ä¸¤å€ï¼Œå¦åˆ™æ¯æ¬¡å®¹é‡å¢åŠ  capacityIncrementã€‚</p><a href=#stack-ç±»><h4 id=stack-ç±»><span class=hanchor arialabel=Anchor># </span>Stack ç±»</h4></a><p>Stack æ˜¯ Vector çš„å­ç±»ï¼Œç”¨äºæ¨¡æ‹Ÿâ€œæ ˆâ€è¿™ç§æ•°æ®ç»“æ„ï¼Œå³â€œåè¿›å…ˆå‡ºâ€(LIFO)çš„å®¹å™¨ã€‚å®ƒæä¾›äº†å¦‚ä¸‹æ–¹æ³•ï¼š</p><p><img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_095956.png width=auto alt></p><p>ç”±äºç»§æ‰¿è‡ª Vectorï¼ŒStack è‡ªç„¶ä¹Ÿç»§æ‰¿äº† Vecor çº¿ç¨‹å®‰å…¨å’Œæ€§èƒ½è¾ƒä½çš„ç‰¹ç‚¹ã€‚å› æ­¤ Stack ç±»åŸºæœ¬å¤„äºåºŸå¼ƒçŠ¶æ€ï¼Œå®ç°æ ˆç»“æ„å¯ç”± LinkedList ä»£æ›¿ã€‚</p><a href=#linkedlist-ç±»><h3 id=linkedlist-ç±»><span class=hanchor arialabel=Anchor># </span>LinkedList ç±»</h3></a><p>LinkedList ç±»æ˜¯ List æ¥å£çš„å®ç°ç±»â€”â€”è¿™æ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ª List é›†åˆï¼Œå¯ä»¥æ ¹æ®ç´¢å¼•æ¥éšæœºè®¿é—®é›†åˆä¸­çš„å…ƒç´ ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>LinkedList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>AbstractSequentialList</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>             <span class=kd>implements</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;,</span> <span class=n>Deque</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>transient</span> <span class=kt>int</span> <span class=n>size</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>transient</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>first</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>transient</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>last</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>LinkedList</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>LinkedList</span><span class=o>(</span><span class=n>Collection</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>E</span><span class=o>&gt;</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>addAll</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹å‡ºï¼ŒLinkedList è¿˜å®ç°äº† Deque æ¥å£ï¼Œå¯ä»¥è¢«å½“ä½œæˆåŒç«¯é˜Ÿåˆ—æ¥ä½¿ç”¨ï¼Œå› æ­¤æ—¢å¯ä»¥è¢«å½“æˆ<strong>æ ˆ</strong>æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“æˆ<strong>é˜Ÿåˆ—</strong>æ¥ä½¿ç”¨ã€‚</p><p>LinkedList çš„å®ç°æœºåˆ¶ä¸ ArrayList å®Œå…¨ä¸åŒã€‚ArrayList å†…éƒ¨æ˜¯ä»¥æ•°ç»„çš„å½¢å¼æ¥ä¿å­˜é›†åˆä¸­çš„å…ƒç´ çš„ï¼Œå› æ­¤éšæœºè®¿é—®é›†åˆå…ƒç´ æ—¶æœ‰è¾ƒå¥½çš„æ€§èƒ½ï¼›è€Œ L inkedList å†…éƒ¨ä»¥é“¾è¡¨çš„å½¢å¼æ¥ä¿å­˜é›†åˆä¸­çš„å…ƒç´ ï¼Œå› æ­¤éšæœºè®¿é—®é›†åˆå…ƒç´ æ—¶æ€§èƒ½è¾ƒå·®ï¼Œä½†åœ¨æ’å…¥ã€åˆ é™¤å…ƒç´ æ—¶æ€§èƒ½æ¯”è¾ƒå‡ºè‰²ã€‚</p><p>ç”±äº LinkedList åŒç«¯é˜Ÿåˆ—çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æ–°å¢äº†ä¸€äº›æ–¹æ³•ã€‚</p><a href=#æ–¹æ³•æ¦‚è§ˆ-1><h4 id=æ–¹æ³•æ¦‚è§ˆ-1><span class=hanchor arialabel=Anchor># </span>æ–¹æ³•æ¦‚è§ˆ</h4></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>void</span> <span class=nf>addFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span><span class=n>å°†æŒ‡å®šå…ƒç´ æ’å…¥æ­¤åˆ—è¡¨çš„å¼€å¤´</span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>addLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>å°†æŒ‡å®šå…ƒç´ æ·»åŠ åˆ°æ­¤åˆ—è¡¨çš„ç»“å°¾</span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>getFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>è¿”å›æ­¤åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>getLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>è¿”å›æ­¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ </span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>offerFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>åœ¨æ­¤åˆ—è¡¨çš„å¼€å¤´æ’å…¥æŒ‡å®šçš„å…ƒç´ </span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>offerLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>åœ¨æ­¤åˆ—è¡¨æœ«å°¾æ’å…¥æŒ‡å®šçš„å…ƒç´ </span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>peekFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>è·å–ä½†ä¸ç§»é™¤æ­¤åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><span class=err>ï¼›</span><span class=n>å¦‚æœæ­¤åˆ—è¡¨ä¸ºç©º</span><span class=err>ï¼Œ</span><span class=n>åˆ™è¿”å›</span> <span class=kc>null</span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>peekLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>è·å–ä½†ä¸ç§»é™¤æ­¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ </span><span class=err>ï¼›</span><span class=n>å¦‚æœæ­¤åˆ—è¡¨ä¸ºç©º</span><span class=err>ï¼Œ</span><span class=n>åˆ™è¿”å›</span> <span class=kc>null</span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>pollFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>è·å–å¹¶ç§»é™¤æ­¤åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><span class=err>ï¼›</span><span class=n>å¦‚æœæ­¤åˆ—è¡¨ä¸ºç©º</span><span class=err>ï¼Œ</span><span class=n>åˆ™è¿”å›</span> <span class=kc>null</span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>pollLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>è·å–å¹¶ç§»é™¤æ­¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ </span><span class=err>ï¼›</span><span class=n>å¦‚æœæ­¤åˆ—è¡¨ä¸ºç©º</span><span class=err>ï¼Œ</span><span class=n>åˆ™è¿”å›</span> <span class=kc>null</span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>removeFirst</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>ç§»é™¤å¹¶è¿”å›æ­¤åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>removeFirstOccurrence</span><span class=o>(</span><span class=n>Objcet</span> <span class=n>o</span><span class=o>):</span> <span class=n>ä»æ­¤åˆ—è¡¨ä¸­ç§»é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ </span><span class=err>ï¼ˆ</span><span class=n>ä»å¤´éƒ¨åˆ°å°¾éƒ¨éå†åˆ—è¡¨æ—¶</span><span class=err>ï¼‰ã€‚</span>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>removeLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>):</span> <span class=n>ç§»é™¤å¹¶è¿”å›æ­¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ </span><span class=err>ã€‚</span>
</span></span><span class=line><span class=cl><span class=kt>boolean</span> <span class=nf>removeLastOccurrence</span><span class=o>(</span><span class=n>Objcet</span> <span class=n>o</span><span class=o>):</span> <span class=n>ä»æ­¤åˆ—è¡¨ä¸­ç§»é™¤æœ€åä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ </span><span class=err>ï¼ˆ</span><span class=n>ä»å¤´éƒ¨åˆ°å°¾éƒ¨éå†åˆ—è¡¨æ—¶</span><span class=err>ï¼‰ã€‚</span>
</span></span></code></pre></td></tr></table></div></div><a href=#å®ç°åŸç†-1><h4 id=å®ç°åŸç†-1><span class=hanchor arialabel=Anchor># </span>å®ç°åŸç†</h4></a><p>LinkedList è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªé“¾è¡¨ã€‚ç”±äºç»´æŠ¤äº†ä¸€ä¸ªè¡¨å¤´ï¼Œè¡¨å°¾çš„ Node å¯¹è±¡çš„å˜é‡ã€‚å¯ä»¥è¿›è¡Œåç»­çš„æ·»åŠ å…ƒç´ åˆ°é“¾è¡¨ä¸­çš„æ“ä½œï¼Œä»¥åŠå…¶ä»–åˆ é™¤ï¼Œæ’å…¥ç­‰æ“ä½œã€‚ä¹Ÿå› æ­¤å®ç°äº†åŒå‘é˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œå³å¯å‘è¡¨å¤´åŠ å…¥å…ƒç´ ï¼Œä¹Ÿå¯ä»¥å‘è¡¨å°¾åŠ å…¥å…ƒç´ ã€‚</p><p>Node å®šä¹‰å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>E</span> <span class=n>item</span><span class=o>;</span><span class=c1>//èŠ‚ç‚¹å€¼
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>;</span><span class=c1>//åç»§èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>prev</span><span class=o>;</span><span class=c1>//å‰é©±èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>Node</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>prev</span><span class=o>,</span> <span class=n>E</span> <span class=n>element</span><span class=o>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=n>element</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=n>prev</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ–°å¢æ“ä½œ add(E e)ï¼Œé»˜è®¤ä½¿ç”¨å°¾æ’æ³•æ·»åŠ å…ƒç´ ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>add</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>linkLast</span><span class=o>(</span><span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>linkLast</span><span class=o>(</span><span class=n>E</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>l</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>newNode</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Node</span><span class=o>&lt;&gt;(</span><span class=n>l</span><span class=o>,</span> <span class=n>e</span><span class=o>,</span> <span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>last</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>l</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>first</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=n>l</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>newNode</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>size</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>    <span class=n>modCount</span><span class=o>++;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åˆ é™¤æŒ‡å®šå…ƒç´  remove(Object o):Â </p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>//å¦‚æœåˆ é™¤å¯¹è±¡ä¸ºnull
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=o>(</span><span class=n>o</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//ä»å¤´å¼€å§‹éå†
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//æ‰¾åˆ°å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>//ä»é“¾è¡¨ä¸­ç§»é™¤æ‰¾åˆ°çš„å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>unlink</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>//ä»å¤´å¼€å§‹éå†
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>for</span> <span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span> <span class=n>x</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>//æ‰¾åˆ°å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>o</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>//ä»é“¾è¡¨ä¸­ç§»é™¤æ‰¾åˆ°çš„å…ƒç´ 
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>unlink</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>E</span> <span class=nf>unlink</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// assert x != null;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>final</span> <span class=n>E</span> <span class=n>element</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>item</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>next</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>;</span><span class=c1>//å¾—åˆ°åç»§èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>final</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>prev</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>prev</span><span class=o>;</span><span class=c1>//å¾—åˆ°å‰é©±èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//åˆ é™¤å‰é©±æŒ‡é’ˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=o>(</span><span class=n>prev</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>first</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span><span class=c1>// å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯å¤´èŠ‚ç‚¹,ä»¤å¤´èŠ‚ç‚¹æŒ‡å‘è¯¥èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>prev</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span><span class=c1>// å°†å‰é©±èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹æŒ‡å‘åç»§èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>x</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>//åˆ é™¤åç»§æŒ‡é’ˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>last</span> <span class=o>=</span> <span class=n>prev</span><span class=o>;</span><span class=c1>//å¦‚æœåˆ é™¤çš„èŠ‚ç‚¹æ˜¯å°¾èŠ‚ç‚¹,ä»¤å°¾èŠ‚ç‚¹æŒ‡å‘è¯¥èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>next</span><span class=o>.</span><span class=na>prev</span> <span class=o>=</span> <span class=n>prev</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>x</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span><span class=o>.</span><span class=na>item</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>size</span><span class=o>--;</span>
</span></span><span class=line><span class=cl>    <span class=n>modCount</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>element</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è·å–åˆ¶å®šä¸‹è¡¨å…ƒç´  get(int index):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>E</span> <span class=nf>get</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>checkElementIndex</span><span class=o>(</span><span class=n>index</span><span class=o>);</span><span class=c1>//æ£€æŸ¥ç´¢å¼•æ˜¯å¦æœ‰æ•ˆ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=n>node</span><span class=o>(</span><span class=n>index</span><span class=o>).</span><span class=na>item</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=nf>node</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// assert isElementIndex(index);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=o>(</span><span class=n>index</span> <span class=o>&lt;</span> <span class=o>(</span><span class=n>size</span> <span class=o>&gt;&gt;</span> <span class=n>1</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>first</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>index</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>next</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>x</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Node</span><span class=o>&lt;</span><span class=n>E</span><span class=o>&gt;</span> <span class=n>x</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>size</span> <span class=o>-</span> <span class=n>1</span><span class=o>;</span> <span class=n>i</span> <span class=o>&gt;</span> <span class=n>index</span><span class=o>;</span> <span class=n>i</span><span class=o>--)</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=na>prev</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>x</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>node æ–¹æ³•é¦–å…ˆä¼šæ¯”è¾ƒâ€œindexâ€å’Œâ€œåŒå‘é“¾è¡¨é•¿åº¦çš„ 1/2â€ï¼›è‹¥å‰è€…å°ï¼Œåˆ™ä»é“¾è¡¨å¤´å¼€å§‹å¾€åæŸ¥æ‰¾ï¼Œç›´åˆ° index ä½ç½®ï¼›å¦åˆ™ï¼Œä»é“¾è¡¨æœ«å°¾å¼€å§‹å…ˆå‰æŸ¥æ‰¾ï¼Œç›´åˆ° index ä½ç½®ã€‚</p><p>ç”±æ­¤å¯è§ï¼ŒLinkedList åœ¨æ’å…¥ã€åˆ é™¤å…ƒç´ æ—¶æ€§èƒ½æ¯”è¾ƒå‡ºè‰²ï¼Œéšæœºè®¿é—®é›†åˆå…ƒç´ æ—¶æ€§èƒ½è¾ƒå·®ã€‚</p><a href=#éå†æ–¹å¼-1><h4 id=éå†æ–¹å¼-1><span class=hanchor arialabel=Anchor># </span>éå†æ–¹å¼</h4></a><p>//todo</p><a href=#map-æ¥å£><h1 id=map-æ¥å£><span class=hanchor arialabel=Anchor># </span>Map æ¥å£</h1></a><p>Map ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ã€‚å®ƒæ˜¯ä¸€ç§é”®å€¼å¯¹çš„ç»“æ„ï¼Œå³ Key-Value ç»“æ„ï¼Œä¸€ä¸ª Map å°±æ˜¯å¾ˆå¤šè¿™æ · K-V é”®å€¼å¯¹ç»„æˆçš„ï¼Œä¸€ä¸ª K-V ç»“æ„æˆ‘ä»¬å°†å…¶ç§°ä½œ Entryï¼ŒKey å’Œ Value éƒ½å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®ã€‚Map çš„ Key ä¸å…è®¸é‡å¤ï¼Œå³åŒä¸€ä¸ª Map å¯¹è±¡çš„ä»»ä½•ä¸¤ä¸ª Key é€šè¿‡ equals æ–¹æ³•æ¯”è¾ƒæ€»æ˜¯è¿”å› falseã€‚</p><p>Key å’Œ Value ä¹‹é—´å­˜åœ¨å•å‘ä¸€å¯¹ä¸€å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„ Keyï¼Œæ€»èƒ½æ‰¾åˆ°å”¯ä¸€çš„ã€ç¡®å®šçš„ Valueã€‚ä» Map ä¸­å–å‡ºæ•°æ®æ—¶ï¼Œåªè¦ç»™å‡ºæŒ‡å®šçš„ Keyï¼Œå°±å¯ä»¥å–å‡ºå¯¹åº”çš„ Valueã€‚</p><p>Map æ¡†æ¶æ¦‚è§ˆï¼š
<img src=https://my-bucket-1251125515.cos.ap-guangzhou.myqcloud.com/Iterable/clipboard_20230322_100030.png width=auto alt></p><p>Map æ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span><span class=lnt>234
</span><span class=lnt>235
</span><span class=lnt>236
</span><span class=lnt>237
</span><span class=lnt>238
</span><span class=lnt>239
</span><span class=lnt>240
</span><span class=lnt>241
</span><span class=lnt>242
</span><span class=lnt>243
</span><span class=lnt>244
</span><span class=lnt>245
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Map</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>size</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>isEmpty</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>containsKey</span><span class=o>(</span><span class=n>Object</span> <span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>containsValue</span><span class=o>(</span><span class=n>Object</span> <span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>V</span> <span class=nf>get</span><span class=o>(</span><span class=n>Object</span> <span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>V</span> <span class=nf>put</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>V</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span> <span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>putAll</span><span class=o>(</span><span class=n>Map</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>K</span><span class=o>,</span> <span class=o>?</span> <span class=kd>extends</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>m</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>clear</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Set</span><span class=o>&lt;</span><span class=n>K</span><span class=o>&gt;</span> <span class=nf>keySet</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>Collection</span><span class=o>&lt;</span><span class=n>V</span><span class=o>&gt;</span> <span class=nf>values</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;&gt;</span> <span class=nf>entrySet</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>interface</span> <span class=nc>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>K</span> <span class=nf>getKey</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=nf>getValue</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=nf>setValue</span><span class=o>(</span><span class=n>V</span> <span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kt>boolean</span> <span class=nf>equals</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=nf>hashCode</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>         * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>         */</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>K</span> <span class=kd>extends</span> <span class=n>Comparable</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>K</span><span class=o>&gt;,</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;&gt;</span> <span class=nf>comparingByKey</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>(</span><span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;&gt;</span> <span class=o>&amp;</span> <span class=n>Serializable</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>(</span><span class=n>c1</span><span class=o>,</span> <span class=n>c2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>c1</span><span class=o>.</span><span class=na>getKey</span><span class=o>().</span><span class=na>compareTo</span><span class=o>(</span><span class=n>c2</span><span class=o>.</span><span class=na>getKey</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>         * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>         */</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span> <span class=kd>extends</span> <span class=n>Comparable</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>V</span><span class=o>&gt;&gt;</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;&gt;</span> <span class=nf>comparingByValue</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>(</span><span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;&gt;</span> <span class=o>&amp;</span> <span class=n>Serializable</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>(</span><span class=n>c1</span><span class=o>,</span> <span class=n>c2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>c1</span><span class=o>.</span><span class=na>getValue</span><span class=o>().</span><span class=na>compareTo</span><span class=o>(</span><span class=n>c2</span><span class=o>.</span><span class=na>getValue</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>         * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>         */</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;&gt;</span> <span class=nf>comparingByKey</span><span class=o>(</span><span class=n>Comparator</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>K</span><span class=o>&gt;</span> <span class=n>cmp</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>cmp</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>(</span><span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;&gt;</span> <span class=o>&amp;</span> <span class=n>Serializable</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>(</span><span class=n>c1</span><span class=o>,</span> <span class=n>c2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>cmp</span><span class=o>.</span><span class=na>compare</span><span class=o>(</span><span class=n>c1</span><span class=o>.</span><span class=na>getKey</span><span class=o>(),</span> <span class=n>c2</span><span class=o>.</span><span class=na>getKey</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>         * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>         */</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kd>static</span> <span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;&gt;</span> <span class=nf>comparingByValue</span><span class=o>(</span><span class=n>Comparator</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>cmp</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>cmp</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>(</span><span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;&gt;</span> <span class=o>&amp;</span> <span class=n>Serializable</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>(</span><span class=n>c1</span><span class=o>,</span> <span class=n>c2</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>cmp</span><span class=o>.</span><span class=na>compare</span><span class=o>(</span><span class=n>c1</span><span class=o>.</span><span class=na>getValue</span><span class=o>(),</span> <span class=n>c2</span><span class=o>.</span><span class=na>getValue</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>equals</span><span class=o>(</span><span class=n>Object</span> <span class=n>o</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>hashCode</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Defaultable methods
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>V</span> <span class=nf>getOrDefault</span><span class=o>(</span><span class=n>Object</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>defaultValue</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(((</span><span class=n>v</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>))</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>||</span> <span class=n>containsKey</span><span class=o>(</span><span class=n>key</span><span class=o>))</span>
</span></span><span class=line><span class=cl>            <span class=o>?</span> <span class=n>v</span>
</span></span><span class=line><span class=cl>            <span class=o>:</span> <span class=n>defaultValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>void</span> <span class=nf>forEach</span><span class=o>(</span><span class=n>BiConsumer</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>K</span><span class=o>,</span> <span class=o>?</span> <span class=kd>super</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>action</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>action</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>entry</span> <span class=o>:</span> <span class=n>entrySet</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>K</span> <span class=n>k</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>V</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>k</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=na>getKey</span><span class=o>();</span>
</span></span><span class=line><span class=cl>                <span class=n>v</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=na>getValue</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>catch</span><span class=o>(</span><span class=n>IllegalStateException</span> <span class=n>ise</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// this usually means the entry is no longer in the map.
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>throw</span> <span class=k>new</span> <span class=n>ConcurrentModificationException</span><span class=o>(</span><span class=n>ise</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=n>action</span><span class=o>.</span><span class=na>accept</span><span class=o>(</span><span class=n>k</span><span class=o>,</span> <span class=n>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>void</span> <span class=nf>replaceAll</span><span class=o>(</span><span class=n>BiFunction</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>K</span><span class=o>,</span> <span class=o>?</span> <span class=kd>super</span> <span class=n>V</span><span class=o>,</span> <span class=o>?</span> <span class=kd>extends</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>function</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>function</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>entry</span> <span class=o>:</span> <span class=n>entrySet</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>K</span> <span class=n>k</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>V</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>k</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=na>getKey</span><span class=o>();</span>
</span></span><span class=line><span class=cl>                <span class=n>v</span> <span class=o>=</span> <span class=n>entry</span><span class=o>.</span><span class=na>getValue</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>catch</span><span class=o>(</span><span class=n>IllegalStateException</span> <span class=n>ise</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// this usually means the entry is no longer in the map.
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>throw</span> <span class=k>new</span> <span class=n>ConcurrentModificationException</span><span class=o>(</span><span class=n>ise</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ise thrown from function is not a cme.
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>v</span> <span class=o>=</span> <span class=n>function</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>k</span><span class=o>,</span> <span class=n>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>entry</span><span class=o>.</span><span class=na>setValue</span><span class=o>(</span><span class=n>v</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>catch</span><span class=o>(</span><span class=n>IllegalStateException</span> <span class=n>ise</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// this usually means the entry is no longer in the map.
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>throw</span> <span class=k>new</span> <span class=n>ConcurrentModificationException</span><span class=o>(</span><span class=n>ise</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>V</span> <span class=nf>putIfAbsent</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>v</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>v</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>v</span> <span class=o>=</span> <span class=n>put</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>boolean</span> <span class=nf>remove</span><span class=o>(</span><span class=n>Object</span> <span class=n>key</span><span class=o>,</span> <span class=n>Object</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Object</span> <span class=n>curValue</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(!</span><span class=n>Objects</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>curValue</span><span class=o>,</span> <span class=n>value</span><span class=o>)</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>            <span class=o>(</span><span class=n>curValue</span> <span class=o>==</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>containsKey</span><span class=o>(</span><span class=n>key</span><span class=o>)))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>remove</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=kt>boolean</span> <span class=nf>replace</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>oldValue</span><span class=o>,</span> <span class=n>V</span> <span class=n>newValue</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Object</span> <span class=n>curValue</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(!</span><span class=n>Objects</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>curValue</span><span class=o>,</span> <span class=n>oldValue</span><span class=o>)</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>            <span class=o>(</span><span class=n>curValue</span> <span class=o>==</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>containsKey</span><span class=o>(</span><span class=n>key</span><span class=o>)))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>put</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>newValue</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>V</span> <span class=nf>replace</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>value</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>curValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(((</span><span class=n>curValue</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>))</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>||</span> <span class=n>containsKey</span><span class=o>(</span><span class=n>key</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>curValue</span> <span class=o>=</span> <span class=n>put</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>curValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>V</span> <span class=nf>computeIfAbsent</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span>
</span></span><span class=line><span class=cl>            <span class=n>Function</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>K</span><span class=o>,</span> <span class=o>?</span> <span class=kd>extends</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>mappingFunction</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>mappingFunction</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>((</span><span class=n>v</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>))</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>V</span> <span class=n>newValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>((</span><span class=n>newValue</span> <span class=o>=</span> <span class=n>mappingFunction</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>key</span><span class=o>))</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>put</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>newValue</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>newValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>V</span> <span class=nf>computeIfPresent</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span>
</span></span><span class=line><span class=cl>            <span class=n>BiFunction</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>K</span><span class=o>,</span> <span class=o>?</span> <span class=kd>super</span> <span class=n>V</span><span class=o>,</span> <span class=o>?</span> <span class=kd>extends</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>remappingFunction</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>remappingFunction</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>oldValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>((</span><span class=n>oldValue</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>))</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>V</span> <span class=n>newValue</span> <span class=o>=</span> <span class=n>remappingFunction</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>oldValue</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>newValue</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>put</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>newValue</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>newValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>remove</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>V</span> <span class=nf>compute</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span>
</span></span><span class=line><span class=cl>            <span class=n>BiFunction</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>K</span><span class=o>,</span> <span class=o>?</span> <span class=kd>super</span> <span class=n>V</span><span class=o>,</span> <span class=o>?</span> <span class=kd>extends</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>remappingFunction</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>remappingFunction</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>oldValue</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>newValue</span> <span class=o>=</span> <span class=n>remappingFunction</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>oldValue</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>newValue</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// delete mapping
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>oldValue</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>||</span> <span class=n>containsKey</span><span class=o>(</span><span class=n>key</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// something to remove
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>remove</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// nothing to do. Leave things as they were.
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// add or replace old mapping
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>put</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>newValue</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>newValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * @since 1.8
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span> <span class=n>V</span> <span class=nf>merge</span><span class=o>(</span><span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>value</span><span class=o>,</span>
</span></span><span class=line><span class=cl>            <span class=n>BiFunction</span><span class=o>&lt;?</span> <span class=kd>super</span> <span class=n>V</span><span class=o>,</span> <span class=o>?</span> <span class=kd>super</span> <span class=n>V</span><span class=o>,</span> <span class=o>?</span> <span class=kd>extends</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>remappingFunction</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>remappingFunction</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>oldValue</span> <span class=o>=</span> <span class=n>get</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=n>newValue</span> <span class=o>=</span> <span class=o>(</span><span class=n>oldValue</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=n>value</span> <span class=o>:</span>
</span></span><span class=line><span class=cl>                   <span class=n>remappingFunction</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=n>oldValue</span><span class=o>,</span> <span class=n>value</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>newValue</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>remove</span><span class=o>(</span><span class=n>key</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>put</span><span class=o>(</span><span class=n>key</span><span class=o>,</span> <span class=n>newValue</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>newValue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Map æ¥å£å¤„äºæ•´ä¸ªæ¡†æ¶çš„é¡¶å±‚ï¼Œç”±ä¸€å † Map è‡ªèº«æ¥å£æ–¹æ³•å’Œä¸€ä¸ª Entry æ¥å£ç»„æˆï¼ŒEntry æ¥å£å®šä¹‰äº†ä¸»è¦æ˜¯å…³äº Key-Value è‡ªèº«çš„ä¸€äº›æ“ä½œï¼ŒMap æ¥å£å®šä¹‰çš„æ˜¯ä¸€äº›å±æ€§å’Œå…³äºå±æ€§æŸ¥æ‰¾ä¿®æ”¹çš„ä¸€äº›æ¥å£æ–¹æ³•ã€‚</p><a href=#hashmap><h2 id=hashmap><span class=hanchor arialabel=Anchor># </span>HashMap</h2></a><p>è§ã€ŠHashMap æºç è§£æã€‹</p><a href=#linkedhashmap><h3 id=linkedhashmap><span class=hanchor arialabel=Anchor># </span>LinkedHashMap</h3></a><p>HashSet æœ‰ä¸€ä¸ª LinkedHashSet å­ç±»ï¼ŒHashMap ä¹Ÿæœ‰ä¸€ä¸ª LinkedHashMap å­ç±»ï¼›LinkedHashMap ä½¿ç”¨åŒå‘é“¾è¡¨æ¥ç»´æŠ¤ key-value å¯¹çš„æ¬¡åºã€‚</p><p>LinkedHashMap éœ€è¦ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºï¼Œå› æ­¤æ€§èƒ½ç•¥ä½äº HashMap çš„æ€§èƒ½ï¼›ä½†æ˜¯å› ä¸ºå®ƒä»¥é“¾è¡¨æ¥ç»´æŠ¤å†…éƒ¨é¡ºåºï¼Œæ‰€ä»¥åœ¨è¿­ä»£è®¿é—® <strong>Map é‡Œçš„å…¨éƒ¨å…ƒç´ æ—¶æœ‰è¾ƒå¥½çš„æ€§èƒ½</strong>ã€‚è¿­ä»£è¾“å‡º LinkedHashMap çš„å…ƒç´ æ—¶ï¼Œå°†ä¼šæŒ‰ç…§æ·»åŠ  key-value å¯¹çš„é¡ºåºè¾“å‡ºã€‚</p><p><strong>æœ¬è´¨ä¸Šæ¥è®²ï¼ŒLinkedHashMap = æ•£åˆ—è¡¨ + åŒå‘å¾ªç¯é“¾è¡¨</strong></p><a href=#strongå®ç°åŸç†strong-1><h4 id=strongå®ç°åŸç†strong-1><span class=hanchor arialabel=Anchor># </span><strong>å®ç°åŸç†</strong></h4></a><p>LinkedHashMap çš„ä¸»è¦æˆå‘˜å˜é‡å’Œæ–¹æ³•å®ç°ç®€åŒ–åå¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>LinkedHashMap</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>HashMap</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> 
</span></span><span class=line><span class=cl>          <span class=kd>implements</span> <span class=n>Map</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>HashMap</span><span class=o>.</span><span class=na>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>before</span><span class=o>,</span> <span class=n>after</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Entry</span><span class=o>(</span><span class=kt>int</span> <span class=n>hash</span><span class=o>,</span> <span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>value</span><span class=o>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>super</span><span class=o>(</span><span class=n>hash</span><span class=o>,</span> <span class=n>key</span><span class=o>,</span> <span class=n>value</span><span class=o>,</span> <span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> 
</span></span><span class=line><span class=cl>    <span class=c1>// åŒå‘é“¾è¡¨çš„å¤´èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>transient</span> <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>head</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// åŒå‘é“¾è¡¨çš„å°¾æˆ’ä½é’ 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>transient</span> <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>tail</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// æ˜¯å¦æŒ‰ç…§è®¿é—®é¡ºåºæ’åº
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>final</span> <span class=kt>boolean</span> <span class=n>accessOrder</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>LinkedHashMap</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>,</span> <span class=kt>float</span> <span class=n>loadFactor</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>initialCapacity</span><span class=o>,</span> <span class=n>loadFactor</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>accessOrder</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>LinkedHashMap</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>initialCapacity</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>accessOrder</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>LinkedHashMap</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>accessOrder</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>LinkedHashMap</span><span class=o>(</span><span class=n>Map</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>K</span><span class=o>,</span> <span class=o>?</span> <span class=kd>extends</span> <span class=n>V</span><span class=o>&gt;</span> <span class=n>m</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>accessOrder</span> <span class=o>=</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>putMapEntries</span><span class=o>(</span><span class=n>m</span><span class=o>,</span> <span class=kc>false</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>LinkedHashMap</span><span class=o>(</span><span class=kt>int</span> <span class=n>initialCapacity</span><span class=o>,</span>
</span></span><span class=line><span class=cl>               <span class=kt>float</span> <span class=n>loadFactor</span><span class=o>,</span> <span class=kt>boolean</span> <span class=n>accessOrder</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>initialCapacity</span><span class=o>,</span> <span class=n>loadFactor</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>accessOrder</span> <span class=o>=</span> <span class=n>accessOrder</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=nf>newNode</span><span class=o>(</span><span class=kt>int</span> <span class=n>hash</span><span class=o>,</span> <span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>value</span><span class=o>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>p</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;(</span><span class=n>hash</span><span class=o>,</span> <span class=n>key</span><span class=o>,</span> <span class=n>value</span><span class=o>,</span> <span class=n>e</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// å°† Entry æ¥åœ¨åŒå‘é“¾è¡¨çš„å°¾éƒ¨
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>linkNodeLast</span><span class=o>(</span><span class=n>p</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=nd>@Overrid</span>
</span></span><span class=line><span class=cl>    <span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=nf>replacementNode</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>p</span><span class=o>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>q</span> <span class=o>=</span> <span class=o>(</span><span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;)</span><span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>t</span> <span class=o>=</span> <span class=k>new</span> <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=o>(</span><span class=n>q</span><span class=o>.</span><span class=na>hash</span><span class=o>,</span> <span class=n>q</span><span class=o>.</span><span class=na>key</span><span class=o>,</span> <span class=n>q</span><span class=o>.</span><span class=na>value</span><span class=o>,</span> <span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>transferLinks</span><span class=o>(</span><span class=n>q</span><span class=o>,</span> <span class=n>t</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>t</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>    <span class=nd>@Overrid</span>
</span></span><span class=line><span class=cl>    <span class=n>TreeNode</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=nf>newTreeNode</span><span class=o>(</span><span class=kt>int</span> <span class=n>hash</span><span class=o>,</span> <span class=n>K</span> <span class=n>key</span><span class=o>,</span> <span class=n>V</span> <span class=n>value</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>            <span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>TreeNode</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>p</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TreeNode</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;(</span><span class=n>hash</span><span class=o>,</span> <span class=n>key</span><span class=o>,</span> <span class=n>value</span><span class=o>,</span> <span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>linkNodeLast</span><span class=o>(</span><span class=n>p</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=n>TreeNode</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=nf>replacementTreeNode</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>p</span><span class=o>,</span> <span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>q</span> <span class=o>=</span> <span class=o>(</span><span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;)</span><span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>TreeNode</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>t</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TreeNode</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;(</span><span class=n>q</span><span class=o>.</span><span class=na>hash</span><span class=o>,</span> <span class=n>q</span><span class=o>.</span><span class=na>key</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>            <span class=n>q</span><span class=o>.</span><span class=na>value</span><span class=o>,</span> <span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>transferLinks</span><span class=o>(</span><span class=n>q</span><span class=o>,</span> <span class=n>t</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>t</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// link at the end of list
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=kt>void</span> <span class=nf>linkNodeLast</span><span class=o>(</span><span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>p</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>last</span> <span class=o>=</span> <span class=n>tail</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>tail</span> <span class=o>=</span> <span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// last ä¸º nullï¼Œè¡¨æ˜é“¾è¡¨è¿˜æœªå»ºç«‹
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>last</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>head</span> <span class=o>=</span> <span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// å°†æ–°èŠ‚ç‚¹ p æ¥åœ¨é“¾è¡¨å°¾éƒ¨
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=n>p</span><span class=o>.</span><span class=na>before</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>last</span><span class=o>.</span><span class=na>after</span> <span class=o>=</span> <span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// apply src&#39;s links to dst
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>private</span> <span class=kt>void</span> <span class=nf>transferLinks</span><span class=o>(</span><span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>src</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                  <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>dst</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>b</span> <span class=o>=</span> <span class=n>dst</span><span class=o>.</span><span class=na>before</span> <span class=o>=</span> <span class=n>src</span><span class=o>.</span><span class=na>before</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>a</span> <span class=o>=</span> <span class=n>dst</span><span class=o>.</span><span class=na>after</span> <span class=o>=</span> <span class=n>src</span><span class=o>.</span><span class=na>after</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>b</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>head</span> <span class=o>=</span> <span class=n>dst</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>b</span><span class=o>.</span><span class=na>after</span> <span class=o>=</span> <span class=n>dst</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>a</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>tail</span> <span class=o>=</span> <span class=n>dst</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>a</span><span class=o>.</span><span class=na>before</span> <span class=o>=</span> <span class=n>dst</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>afterNodeAccess</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>p</span><span class=o>)</span> <span class=o>{</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>afterNodeInsertion</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>evict</span><span class=o>)</span> <span class=o>{</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>afterNodeRemoval</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>LinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œå› æ­¤å…·æœ‰å’Œ HashMap ä¸€æ ·çš„å¿«é€ŸæŸ¥æ‰¾ç‰¹æ€§ã€‚</p><p>Map ç±»å‹çš„é›†åˆç±»æ˜¯é€šè¿‡ put(K,V) æ–¹æ³•æ’å…¥é”®å€¼å¯¹ï¼ŒLinkedHashMap æœ¬èº«å¹¶æ²¡æœ‰è¦†å†™çˆ¶ç±»çš„ put æ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨äº†çˆ¶ç±»çš„å®ç°ã€‚</p><p>åœ¨ newNode æ–¹æ³•ä¸­ï¼ŒLinkedHashMap åˆ›å»ºäº† Entryï¼Œå¹¶é€šè¿‡ linkNodeLast æ–¹æ³•å°† Entry æ¥åœ¨åŒå‘é“¾è¡¨çš„å°¾éƒ¨ï¼Œå®ç°äº†åŒå‘é“¾è¡¨çš„å»ºç«‹</p><a href=#afternodeaccess><h4 id=afternodeaccess><span class=hanchor arialabel=Anchor># </span>afterNodeAccess()</h4></a><p>å½“ä¸€ä¸ªèŠ‚ç‚¹è¢«è®¿é—®æ—¶ï¼Œå¦‚æœ accessOrder ä¸º trueï¼Œåˆ™ä¼šå°†è¯¥èŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å°¾éƒ¨ã€‚ä¹Ÿå°±æ˜¯è¯´æŒ‡å®šä¸º LRU é¡ºåºä¹‹åï¼Œåœ¨æ¯æ¬¡è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œä¼šå°†è¿™ä¸ªèŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å°¾éƒ¨ï¼Œä¿è¯é“¾è¡¨å°¾éƒ¨æ˜¯æœ€è¿‘è®¿é—®çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé“¾è¡¨é¦–éƒ¨å°±æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>void</span> <span class=nf>afterNodeAccess</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// move node to last
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>last</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>accessOrder</span> <span class=o>&amp;&amp;</span> <span class=o>(</span><span class=n>last</span> <span class=o>=</span> <span class=n>tail</span><span class=o>)</span> <span class=o>!=</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>p</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=o>(</span><span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;)</span><span class=n>e</span><span class=o>,</span> <span class=n>b</span> <span class=o>=</span> <span class=n>p</span><span class=o>.</span><span class=na>before</span><span class=o>,</span> <span class=n>a</span> <span class=o>=</span> <span class=n>p</span><span class=o>.</span><span class=na>after</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>p</span><span class=o>.</span><span class=na>after</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>b</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>head</span> <span class=o>=</span> <span class=n>a</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>b</span><span class=o>.</span><span class=na>after</span> <span class=o>=</span> <span class=n>a</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>a</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>a</span><span class=o>.</span><span class=na>before</span> <span class=o>=</span> <span class=n>b</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>last</span> <span class=o>=</span> <span class=n>b</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>last</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>head</span> <span class=o>=</span> <span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>p</span><span class=o>.</span><span class=na>before</span> <span class=o>=</span> <span class=n>last</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=n>last</span><span class=o>.</span><span class=na>after</span> <span class=o>=</span> <span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>tail</span> <span class=o>=</span> <span class=n>p</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>++</span><span class=n>modCount</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><a href=#afternodeinsertion><h4 id=afternodeinsertion><span class=hanchor arialabel=Anchor># </span>afterNodeInsertion()</h4></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>void</span> <span class=nf>afterNodeInsertion</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>evict</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// possibly remove eldest
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>first</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=n>evict</span> <span class=o>&amp;&amp;</span> <span class=o>(</span><span class=n>first</span> <span class=o>=</span> <span class=n>head</span><span class=o>)</span> <span class=o>!=</span> <span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=n>removeEldestEntry</span><span class=o>(</span><span class=n>first</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>K</span> <span class=n>key</span> <span class=o>=</span> <span class=n>first</span><span class=o>.</span><span class=na>key</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>removeNode</span><span class=o>(</span><span class=n>hash</span><span class=o>(</span><span class=n>key</span><span class=o>),</span> <span class=n>key</span><span class=o>,</span> <span class=kc>null</span><span class=o>,</span> <span class=kc>false</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>protected</span> <span class=kt>boolean</span> <span class=nf>removeEldestEntry</span><span class=o>(</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>eldest</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨å…ƒç´ æ–°å¢ä¹‹åï¼Œå½“ removeEldestEntry() æ–¹æ³•è¿”å› true æ—¶ä¼šç§»é™¤æœ€æ™šçš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨é¦–éƒ¨èŠ‚ç‚¹ firstã€‚</p><p>evict åªæœ‰åœ¨æ„å»º Map çš„æ—¶å€™æ‰ä¸º falseï¼Œåœ¨è¿™é‡Œä¸º trueã€‚</p><p>removeEldestEntry() é»˜è®¤ä¸º falseï¼Œå¦‚æœéœ€è¦è®©å®ƒä¸º trueï¼Œéœ€è¦ç»§æ‰¿ LinkedHashMap å¹¶ä¸”è¦†ç›–è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œè¿™åœ¨å®ç° LRU çš„ç¼“å­˜ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œé€šè¿‡ç§»é™¤æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ï¼Œä»è€Œä¿è¯ç¼“å­˜ç©ºé—´è¶³å¤Ÿï¼Œå¹¶ä¸”ç¼“å­˜çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ã€‚</p><a href=#afternoderemoval><h4 id=afternoderemoval><span class=hanchor arialabel=Anchor># </span>afterNodeRemoval()</h4></a><p>å…ƒç´ è¢«åˆ é™¤åï¼Œæ­¤æ–¹æ³•ä¼šè¢«å›è°ƒï¼Œåˆ é™¤åŒå‘é“¾è¡¨ä¸­å¯¹åº”çš„èŠ‚ç‚¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kt>void</span> <span class=nf>afterNodeRemoval</span><span class=o>(</span><span class=n>Node</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>e</span><span class=o>)</span> <span class=o>{</span> <span class=c1>// unlink
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;</span> <span class=n>p</span> <span class=o>=</span> <span class=o>(</span><span class=n>LinkedHashMap</span><span class=o>.</span><span class=na>Entry</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span><span class=n>V</span><span class=o>&gt;)</span><span class=n>e</span><span class=o>,</span> 
</span></span><span class=line><span class=cl>          <span class=n>b</span> <span class=o>=</span> <span class=n>p</span><span class=o>.</span><span class=na>before</span><span class=o>,</span> <span class=n>a</span> <span class=o>=</span> <span class=n>p</span><span class=o>.</span><span class=na>after</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å°† p èŠ‚ç‚¹çš„å‰é©±ååç»§å¼•ç”¨ç½®ç©º
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>p</span><span class=o>.</span><span class=na>before</span> <span class=o>=</span> <span class=n>p</span><span class=o>.</span><span class=na>after</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// b ä¸º nullï¼Œè¯´æ˜ p æ˜¯å¤´èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=o>(</span><span class=n>b</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>head</span> <span class=o>=</span> <span class=n>a</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=n>b</span><span class=o>.</span><span class=na>after</span> <span class=o>=</span> <span class=n>a</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// a ä¸º nullï¼Œè¯´æ˜ p æ˜¯å°¾èŠ‚ç‚¹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=o>(</span><span class=n>a</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>tail</span> <span class=o>=</span> <span class=n>b</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span><span class=o>.</span><span class=na>before</span> <span class=o>=</span> <span class=n>b</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><a href=#lru-ç¼“å­˜><h4 id=lru-ç¼“å­˜><span class=hanchor arialabel=Anchor># </span>LRU ç¼“å­˜</h4></a><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ LinkedHashMap å®ç°çš„ä¸€ä¸ª LRU ç¼“å­˜ï¼š</p><ul><li>è®¾å®šæœ€å¤§ç¼“å­˜ç©ºé—´ MAX_ENTRIES ä¸º 3ï¼›</li><li>ä½¿ç”¨ LinkedHashMap çš„æ„é€ å‡½æ•°å°† accessOrder è®¾ç½®ä¸º trueï¼Œå¼€å¯ LRU é¡ºåºï¼›</li><li>è¦†ç›– removeEldestEntry() æ–¹æ³•å®ç°ï¼Œåœ¨èŠ‚ç‚¹å¤šäº MAX_ENTRIES å°±ä¼šå°†æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ç§»é™¤ã€‚</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>LRUCache</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;</span> <span class=kd>extends</span> <span class=n>LinkedHashMap</span><span class=o>&lt;</span><span class=n>K</span><span class=o>,</span> <span class=n>V</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>int</span> <span class=n>MAX_ENTRIES</span> <span class=o>=</span> <span class=n>3</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>boolean</span> <span class=nf>removeEldestEntry</span><span class=o>(</span><span class=n>Map</span><span class=o>.</span><span class=na>Entry</span> <span class=n>eldest</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>size</span><span class=o>()</span> <span class=o>&gt;</span> <span class=n>MAX_ENTRIES</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>LRUCache</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>MAX_ENTRIES</span><span class=o>,</span> <span class=n>0</span><span class=o>.</span><span class=na>75f</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><a href=#treemap><h2 id=treemap><span class=hanchor arialabel=Anchor># </span>TreeMap</h2></a><p>TreeMap æ˜¯ SortedMap æ¥å£çš„å®ç°ç±»ã€‚TreeMap æ˜¯ä¸€ä¸ª<strong>æœ‰åºçš„ </strong>key-value é›†åˆï¼Œå®ƒæ˜¯é€šè¿‡çº¢é»‘æ ‘å®ç°çš„ï¼Œæ¯ä¸ª key-value å¯¹å³ä½œä¸ºçº¢é»‘æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><a href=#æ’åºæ–¹å¼-2><h3 id=æ’åºæ–¹å¼-2><span class=hanchor arialabel=Anchor># </span>æ’åºæ–¹å¼</h3></a><p>å’Œ TreeSet ä¸€æ ·ï¼ŒTreeMap æœ‰ä¸¤ç§æ’åºæ–¹å¼ï¼š</p><ul><li>è‡ªç„¶æ’åºï¼šTreeMap çš„æ‰€æœ‰ key å¿…é¡»å®ç° Comparable æ¥å£ï¼Œè€Œä¸”æ‰€æœ‰çš„ key åº”è¯¥æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ›å‡º ClassCastException å¼‚å¸¸ã€‚</li><li>å®šåˆ¶æ’åºï¼šåˆ›å»º TreeMap æ—¶ï¼Œä¼ å…¥ä¸€ä¸ª Comparator å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹ TreeMap ä¸­çš„æ‰€æœ‰ key è¿›è¡Œæ’åºã€‚</li></ul><a href=#åˆ¤æ–­å…ƒç´ ç›¸ç­‰-1><h3 id=åˆ¤æ–­å…ƒç´ ç›¸ç­‰-1><span class=hanchor arialabel=Anchor># </span>åˆ¤æ–­å…ƒç´ ç›¸ç­‰</h3></a><p>ç±»ä¼¼äº TreeSet ä¸­åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰çš„æ ‡å‡†ï¼ŒTreeMap ä¸­åˆ¤æ–­ä¸¤ä¸ª key ç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ª key é€šè¿‡ compareTo() æ–¹æ³•è¿”å› 0ï¼ŒTreeMap å³è®¤ä¸ºè¿™ä¸¤ä¸ª key æ˜¯ç›¸ç­‰çš„ï¼›åˆ¤æ–­ä¸¤ä¸ª value ç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ª value é€šè¿‡ equals() æ–¹æ³•æ¯”è¾ƒè¿”å› trueã€‚</p><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœä½¿ç”¨è‡ªå®šä¹‰ç±»ä½œä¸º TreeMap çš„ keyï¼Œä¸”æƒ³è®© TreeMap è‰¯å¥½åœ°å·¥ä½œï¼Œåˆ™é‡å†™è¯¥ç±»çš„ equals() æ–¹æ³•å’Œ compareTo() æ–¹æ³•æ—¶åº”ä¿æŒä¸€è‡´çš„è¿”å›ç»“æœï¼šä¸¤ä¸ª key é€šè¿‡ equals()æ–¹ æ³•æ¯”è¾ƒè¿”å› true æ—¶ï¼Œå®ƒä»¬é€šè¿‡ compareTo() æ–¹æ³•æ¯”è¾ƒåº”è¯¥è¿”å› 0ã€‚å¦‚æœä¸¤ä¸ªæ–¹æ³•çš„è¿”å›ç»“æœä¸ä¸€è‡´ï¼ŒTreeMap ä¸ Map æ¥å£çš„è§„åˆ™å°±ä¼šå†²çªã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œä¸ TreeSet ç±»ä¼¼ï¼ŒTreeMap æ ¹æ®æ’åºç‰¹æ€§ï¼Œä¹Ÿæ·»åŠ äº†ä¸€éƒ¨åˆ†æ–°çš„æ–¹æ³•ï¼Œä¸ TreeSet ä¸­çš„ä¸€è‡´ã€‚å¯ä»¥å‚è€ƒæœ¬æ–‡å‰é¢çš„å†…å®¹ã€‚</p><a href=#å®ç°åŸç†-2><h3 id=å®ç°åŸç†-2><span class=hanchor arialabel=Anchor># </span>å®ç°åŸç†</h3></a><p>TreeMap åŸºäºçº¢é»‘æ ‘å®ç°ï¼Œè€Œçº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ‰€ä»¥æŸ¥æ‰¾æ“ä½œæµç¨‹å’ŒäºŒå‰æŸ¥æ‰¾æ ‘ä¸€è‡´ã€‚TreeMap å¯ä¿è¯åœ¨ log(n) æ—¶é—´å¤æ‚åº¦å†…å®Œæˆ containsKeyã€getã€put å’Œ remove æ“ä½œï¼Œæ•ˆç‡å¾ˆé«˜ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äº TreeMap åŸºäºçº¢é»‘æ ‘å®ç°ï¼Œè¿™ä¸º TreeMap ä¿æŒé”®çš„æœ‰åºæ€§æ‰“ä¸‹äº†åŸºç¡€ã€‚æ€»çš„æ¥è¯´ï¼ŒTreeMap çš„æ ¸å¿ƒæ˜¯çº¢é»‘æ ‘ï¼Œå…¶å¾ˆå¤šæ–¹æ³•ä¹Ÿæ˜¯å¯¹çº¢é»‘æ ‘å¢åˆ æŸ¥åŸºç¡€æ“ä½œçš„ä¸€ä¸ªåŒ…è£…ã€‚</p><a href=#fast-fail-æœºåˆ¶><h1 id=fast-fail-æœºåˆ¶><span class=hanchor arialabel=Anchor># </span>fast-fail æœºåˆ¶</h1></a><h1 id=heading></h1></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://www.guanpj.top/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by guanpj using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2023</p><ul><li><a href=https://www.guanpj.top/>Home</a></li><li><a href=https://twitter.com/guanpj>Twitter</a></li><li><a href=https://github.com/guanpj>GitHub</a></li></ul></footer></div></div></body></html>